"use strict";var _AdharaListView$DEFAU,_get=function get(object,property,receiver){null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(void 0===desc){var parent=Object.getPrototypeOf(object);return null===parent?void 0:get(parent,property,receiver)}if("value"in desc)return desc.value;var getter=desc.get;return void 0!==getter?getter.call(receiver):void 0},_slicedToArray=function(){return function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return function(arr,i){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{!_n&&_i.return&&_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){return function step(key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}if(!info.done)return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}("next")})}}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var TemplateEngineHelpers=function(){function TemplateEngineHelpers(){_classCallCheck(this,TemplateEngineHelpers)}return _createClass(TemplateEngineHelpers,null,[{key:"getHelpers",value:function(currentHelpers){var if_helper=currentHelpers.if;return{addAttr:function(attributes,default_attributes){if(attributes||default_attributes){var attrData=[];default_attributes=default_attributes&&"string"==typeof default_attributes?JSON.parse(default_attributes):{};var class_names=attributes&&(attributes.className||attributes.class)||"";return class_names+=default_attributes.hasOwnProperty("class")?" "+default_attributes.class:"",(attributes=Object.assign(default_attributes,attributes)).class=class_names,loop(attributes,function(key,value){if(key&&void 0!==value){if("style"===key){var css_values=[];loop(value,function(css_prop,css_value){css_values.push(css_prop+":"+css_value+";")}),value=css_values.join("")}"string"==typeof value&&(value='"'+value.replace(/"/g,'\\"')+'"'),attrData.push(key+"="+value)}}),new window.Handlebars.SafeString(attrData.join(" "))}},addProps:function(){var properties=Array.prototype.slice.call(arguments);return(properties=properties.splice(1,subs.length-2)).join(" ")},selectedClass:function(selected,selectedClassName){return!0===selected?selectedClassName:""},include:function(template_name,context){return new window.Handlebars.SafeString(TemplateUtils.execute(template_name,context))},math:function(param1,operation,param2){var lvalue=parseFloat(String(param1)),rvalue=parseFloat(String(param2));return{"+":lvalue+rvalue,"-":lvalue-rvalue,"*":lvalue*rvalue,"/":lvalue/rvalue,"%":lvalue%rvalue}[operation]},i18n:function(i18nKey){var subs=Array.prototype.slice.call(arguments);return subs=subs.splice(1,subs.length-2),Adhara.i18n.get(i18nKey,subs)},get:function(object,path){return getValueFromJSON(object,path)},if:function(param1,operator,param2,options){return"object"===(void 0===operator?"undefined":_typeof(operator))?if_helper.call(this,param1,operator):evaluateLogic(param1,operator,param2)?options.fn(this):options.inverse(this)},mIf:function(){for(var arr=[!0,"and",!0],args_len=arguments.length-1,options=arguments[args_len],i=0;i<args_len;i++)0===i?arr[0]=arguments[i]:i%2==1?arr[1]=arguments[i]:(arr[2]=arguments[i],arr[0]=evaluateLogic(arr[0],arr[1],arr[2]));return arr[0]?options.fn(this):options.inverse(this)},eIf:function(param1,operator,param2){return evaluateLogic(param1,operator,param2)},global:function(global_letiable){return 0===global_letiable.indexOf("Adhara.")?getValueFromJSON(Adhara,global_letiable.substring("Adhara.".length)):getValueFromJSON(window,global_letiable)},loop:function(looper,options){for(var structure="",i=0;i<looper.length;i++)structure+=options.fn(looper[i]);return structure},append:function(){var args=Array.prototype.slice.call(arguments);return args.pop(),args.map(function(arg){return"object"===(void 0===arg?"undefined":_typeof(arg))?JSON.stringify(arg):arg}).join("")},make_json:function(str){return JSON.parse(str)},make_context:function(){for(var context={},i=0;i<arguments.length-1;i+=2)context[arguments[i]]=arguments[i+1];return context},fn_call:function(fn){return call_fn.apply(this,Array.prototype.slice.call(arguments).slice(0,-1))},loopObject:function(looper,options){var structure="";return loop(looper,function(key,value){structure+=options.fn({key:key,value:value})}),structure},iterate_range:function(start,step,end,options){for(var str_buf="",i=start;i<=end;i+=step)str_buf+=options.fn(i);return str_buf}}}},{key:"registerHelpers",value:function(){window.Handlebars.registerHelper(TemplateEngineHelpers.getHelpers(window.Handlebars.helpers))}}]),TemplateEngineHelpers}();function handleForm(form){if(!form.submitting){form.submitting=!0;var apiData=void 0;if(!!form.querySelector('input[type="file"]'))apiData=new FormData(form);else{var formData=jQuery(form).serializeArray();apiData={},jQuery.each(formData,function(i,fieldData){apiData[fieldData.name]=fieldData.value})}var format_fn=form.getAttribute("format-data");format_fn&&(apiData=call_fn(format_fn,apiData)),!1!==apiData&&RestAPI[form.getAttribute("api-method")]({url:form.action.split(window.location.host)[1],data:apiData,successMessage:form.getAttribute("success-message"),handleError:"false"!==form.getAttribute("handle-error"),success:function(data){"true"===form.getAttribute("form-clear")&&form.reset(),jQuery(form).trigger("success",data)},failure:function(message){jQuery(form).trigger("failure",message)}})}}function registerConfigUtils(){Adhara.configUtils={getViewInstance:function(entity_config){try{return Adhara.getView(entity_config.view)}catch(e){return!1}},getProcessor:function(entity_config){return entity_config.processor||Processor.fallback},getController:function(entity_config){return entity_config.controller||Adhara.restAPI},getDataConfig:function(entity_config){return entity_config.data_config},getBlobClass:function(entity_config){return entity_config.data_config.blob||entity_config.blob||DataBlob},getSimilarDataConfigs:function(data_config){var res=[],app_config=Adhara.app.config;for(var entity_name in app_config)if(app_config.hasOwnProperty(entity_name)){var entity_config=Adhara.app.getEntityConfig(entity_name);(data_config._url!==Adhara.configUtils.getDataConfig(entity_config)._url||data_config.blob&&data_config.blob!==Adhara.configUtils.getBlobClass(entity_config))&&JSON.stringify(data_config)!==JSON.stringify(entity_config.data_config)||res.push(entity_config)}return res}}}function registerAdharaUtils(){registerConfigUtils(),Adhara.templateEngine.helpersHandler.registerHelpers(),jQuery(document).on("submit","form.api-form",function(event){event.preventDefault(),handleForm(this)}),jQuery(document).on("success","form.dialog-form",function(){this.close.click()})}function evaluateLogic(param1,operator,param2){return"in"===operator?param2&&-1!==param2.indexOf(param1):"not_in"===operator?param2&&-1===param2.indexOf(param1):"contains"===operator?param1&&-1!==param1.indexOf(param2):"not_contains"===operator?param1&&-1===param1.indexOf(param2):"has"===operator?param1&&param1.hasOwnProperty(param2):{"||":param1||param2,"&&":param1&&param2,"|":param1|param2,"&":param1&param2,"==":param1==param2,"===":param1===param2,"!=":param1!=param2,"!==":param1!==param2,">":param1>param2,"<":param1<param2,">=":param1>=param2,"<=":param1<=param2,equals:param1==param2,and:param1&&param2,or:param1||param2}[operator]}function getValueFromJSON(object,path,identifier){try{if(!path)return object;for(var keys=path.split("."),i=0;i<keys.length;i++){var key_in=keys[i];if(-1!==key_in.indexOf("[")){var arr=key_in.split("["),arrName=arr[0],index=arr[1].split("]")[0];if(isNaN(index)){for(var rite=object[arrName],separator=index.substring(identifier.length,index.length),formattedVal="",j=0;j<rite.length;j++)j>0&&(formattedVal+=separator),formattedVal+=getValueFromJSON(rite[j],path.split(".").splice(i+1).join("."),identifier);object=formattedVal}else object=object[arrName][index];break}object=object[key_in]}return object}catch(e){return}}function setValueToJson(object,path,value){var keys=path.split(".");loop(keys,function(i,key){i+1<keys.length?(object.hasOwnProperty(key)||(object[key]={}),object=object[key]):object[key]=value})}function call_fn(fn){if(fn){var args=Array.prototype.slice.call(arguments);if(args.splice(0,1),"function"==typeof fn)return fn.apply(fn,args);try{if((fn=getValueFromJSON(window,fn))&&fn!==window)return fn.apply(window[fn],args)}catch(e){throw"TypeError"===e.name&&-1!==e.message.indexOf("is not a function")?new Error("error executing function : "+fn):e}}}function call_fn_or_def(fn){var args=Array.prototype.slice.call(arguments),def_fn=args.pop();return"function"!=typeof def_fn&&"function"!=typeof window[def_fn]&&(args.push(def_fn),def_fn=void 0),fn?call_fn.apply(call_fn,args):def_fn?(args[0]=def_fn,call_fn.apply(call_fn,args)):void 0}function loop(object,cbk,reverseIterate){var i=void 0,loop_size=void 0;if(object instanceof Array)if(loop_size=object.length,reverseIterate)for(i=loop_size-1;i>=0&&!1!==cbk(i,object[i]);i--);else for(i=0;i<loop_size&&!1!==cbk(i,object[i]);i++);else{var keys=Object.keys(object);for(loop_size=keys.length,i=0;i<loop_size&&!1!==cbk(keys[i],object[keys[i]]);i++);}}var TemplateUtils={};!function(){var preCompiledCache={};TemplateUtils.execute=function(template_or_template_string,context,cache){var template=window.Handlebars.templates[template_or_template_string];return!template&&window.Handlebars.hasOwnProperty("compile")&&(!1!==cache?(template=preCompiledCache[template_or_template_string])||(template=preCompiledCache[template_or_template_string]=window.Handlebars.compile(template_or_template_string)):template=window.Handlebars.compile(template_or_template_string)),template(context)}}();var Internationalize=function(){function Internationalize(key_map){_classCallCheck(this,Internationalize),this.key_map=key_map}return _createClass(Internationalize,[{key:"getValue",value:function(key,subs,default_value){if(key){var value=this.key_map[key]||getValueFromJSON(this.key_map,key);if(!value)return default_value;subs=subs||[];for(var placeholders=value.match(/{[0-9]+}/g)||[],i=0;i<placeholders.length;i++){var sub=subs[i]||"";try{-1!==sub.indexOf(".")&&(sub=this.get(sub))}catch(e){}value=value.replace(new RegExp("\\{"+i+"\\}","g"),sub)}return value.trim()}}},{key:"get",value:function(key,subs){return this.getValue(key,subs,key)}}]),Internationalize}();function MutateViews(baseClass){for(var _len=arguments.length,mixins=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)mixins[_key-1]=arguments[_key];var base=function(_baseClass){function base(){for(var _ref,_len2=arguments.length,args=Array(_len2),_key2=0;_key2<_len2;_key2++)args[_key2]=arguments[_key2];_classCallCheck(this,base);var _this=_possibleConstructorReturn(this,(_ref=base.__proto__||Object.getPrototypeOf(base)).call.apply(_ref,[this].concat(args)));return mixins.forEach(function(mixin){copyProps(_this,new(Function.prototype.bind.apply(mixin,[null].concat(args))))}),_this}return _inherits(base,baseClass),base}();function copyProps(target,source){Object.getOwnPropertyNames(source).concat(Object.getOwnPropertySymbols(source)).forEach(function(prop){prop.match(/^(?:constructor|prototype|arguments|caller|name|bind|call|apply|toString|length)$/)||Object.defineProperty(target,prop,Object.getOwnPropertyDescriptor(source,prop))})}return mixins.forEach(function(mixin){copyProps(base.prototype,mixin.prototype),copyProps(base,mixin)}),base}var AdharaTicker=function(){function AdharaTicker(interval,exponential_factor,min_interval){_classCallCheck(this,AdharaTicker),this.interval=0===interval?interval:interval||2e3,this.exponential_factor=exponential_factor||1,this.min_interval=min_interval||0,this.initial_interval=interval,this.timeoutId=null}return _createClass(AdharaTicker,[{key:"scheduleNextTick",value:function(){var _this2=this;this.pause(),this.interval<=this.min_interval||(this.timeoutId=window.setTimeout(function(){_this2.onExecute()},this.interval))}},{key:"next",value:function(){this.scheduleNextTick()}},{key:"onExecute",value:function(){this.interval*=this.exponential_factor,this.on_execute(this.next)}},{key:"start",value:function(execute){this.on_execute=execute,this.scheduleNextTick()}},{key:"pause",value:function(){window.clearTimeout(this.timeoutId)}},{key:"resume",value:function(){this.scheduleNextTick()}},{key:"stop",value:function(){this.pause(),this.interval=this.initial_interval}},{key:"restart",value:function(){this.stop(),this.scheduleNextTick()}}]),AdharaTicker}(),AdharaRouter=null;!function(){var registeredUrlPatterns={},queryParams={},pathParams={},historyStack=[],currentUrl=void 0,currentRoute=void 0,listeners={},middlewares=[];function getFullUrl(){return window.location.href}function getPathName(){return AdharaRouter.transformURL(window.location.pathname)}function getFullPath(){return getPathName()+window.location.search+window.location.hash}function getSearchString(){return window.location.search.substring(1)}function isCurrentPath(new_path){function stripSlash(path){return 0===path.indexOf("/")?path.substring(1):path}return stripSlash(getFullPath())===stripSlash(new_path)}function matchUrl(){var path=getPathName(),matchFound=!1;for(var regex in registeredUrlPatterns)if(registeredUrlPatterns.hasOwnProperty(regex)&&!matchFound){var formed_regex=new RegExp(regex);if(formed_regex.test(path))return matchFound=!0,{opts:registeredUrlPatterns[regex],path:path,params:formed_regex.exec(path)}}}function matchAndCall(){var _this3=this,matchOptions=matchUrl();if(matchOptions){var opts=matchOptions.opts,path=matchOptions.path,params=matchOptions.params;if(params.splice(0,1),opts&&opts.fn){var _pathParams={},_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=params.entries()[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var _ref2=_step.value,_ref3=_slicedToArray(_ref2,2),index=_ref3[0],param=_ref3[1];_pathParams[opts.path_param_keys[index]]=param}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}currentRoute=opts,pathParams=_pathParams,currentUrl=getFullUrl(),fetchQueryParams(),function(params,proceed){var i=0;!function _proceed(){var middleware_fn=middlewares[i++];middleware_fn?call_fn(middleware_fn,params,_proceed):proceed()}()}({view_name:opts.view_name,path:path,query_params:getQueryParams(),path_params:_pathParams},function(){params.push(queryParams),opts.fn.constructor instanceof AdharaView.constructor?Adhara.onRoute(opts.fn,params):opts.fn.apply(_this3,params)})}}return!!matchOptions}var curr_path=void 0;function updateHistoryStack(){curr_path&&historyStack.push(curr_path),curr_path=getFullPath()}var settingURL=!1;function getQueryParams(){var qp={};return getSearchString()?loop(getSearchString().split("&"),function(i,paramPair){paramPair=paramPair.split("="),qp[decodeURIComponent(paramPair[0])]=decodeURIComponent(paramPair[1])}):qp={},qp}function fetchQueryParams(){queryParams=getQueryParams()}function generateCurrentUrl(){var url=getPathName(),params=[];return loop(queryParams,function(key,value){params.push(encodeURIComponent(key)+"="+encodeURIComponent(value))}),params.length&&(url+="?"+params.join("&")),url}function _route(route_type,route_options){route_type&&route_type!==AdharaRouter.RouteTypes.SET?route_type===AdharaRouter.RouteTypes.NAVIGATE?AdharaRouter.navigateTo(generateCurrentUrl(),route_options&&route_options.force||!1):route_type===AdharaRouter.RouteTypes.OVERRIDE?AdharaRouter.overrideURL(generateCurrentUrl()):route_type===AdharaRouter.RouteTypes.UPDATE&&AdharaRouter.updateURL(generateCurrentUrl()):AdharaRouter.setURL(generateCurrentUrl())}var STATE_KEY="__adhara_router__",Router=function(){function Router(){_classCallCheck(this,Router)}return _createClass(Router,null,[{key:"transformURL",value:function(url){return url}},{key:"register_one",value:function(pattern,view_name,fn){for(var path_param_keys=[],regex=/{{([a-zA-Z$_][a-zA-Z0-9$_]*)}}/g,match=regex.exec(pattern);null!=match;)path_param_keys.push(match[1]),match=regex.exec(pattern);pattern=pattern.replace(new RegExp("\\{\\{[a-zA-Z$_][a-zA-Z0-9$_]*\\}\\}","g"),""),pattern=(pattern="^"+this.transformURL(pattern.substring(1))).replace(/[?]/g,"\\?"),registeredUrlPatterns[pattern]={view_name:view_name,fn:fn,path_param_keys:path_param_keys}}},{key:"deRegister",value:function(regex){registeredUrlPatterns[regex]=void 0}},{key:"register",value:function(list){var _iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=list[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var conf=_step2.value;this.register_one(conf.url,conf.view_name,conf.view)}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{!_iteratorNormalCompletion2&&_iterator2.return&&_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}}},{key:"configure",value:function(router_configuration){if(router_configuration.routes&&Router.register(router_configuration.routes),router_configuration.on_route_listeners)for(var listener_name in router_configuration.on_route_listeners)router_configuration.on_route_listeners.hasOwnProperty(listener_name)&&Router.onRoute(listener_name,router_configuration.on_route_listeners[listener_name]);if(router_configuration.middlewares){var _iteratorNormalCompletion3=!0,_didIteratorError3=!1,_iteratorError3=void 0;try{for(var _step3,_iterator3=router_configuration.middlewares[Symbol.iterator]();!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=!0){var middleware_fn=_step3.value;Router.registerMiddleware(middleware_fn)}}catch(err){_didIteratorError3=!0,_iteratorError3=err}finally{try{!_iteratorNormalCompletion3&&_iterator3.return&&_iterator3.return()}finally{if(_didIteratorError3)throw _iteratorError3}}}}},{key:"onRoute",value:function(listener_name,listener_fn){listeners[listener_name]=listener_fn}},{key:"offRouteListener",value:function(listener_name){listeners[listener_name]=void 0}},{key:"registerMiddleware",value:function(middleware_fn){"function"==typeof middleware_fn&&middlewares.push(middleware_fn)}},{key:"route",value:function(){if(settingURL)settingURL=!1;else if(!matchAndCall())throw new Error("No route registered for this url : "+getPathName());loop(listeners,function(listener_name,listener_fn){call_fn(listener_fn)})}},{key:"getCurrentRoute",value:function(){return currentRoute||(currentRoute=matchUrl().opts),currentRoute}},{key:"getCurrentPageName",value:function(){return AdharaRouter.getCurrentRoute().view_name}},{key:"getCurrentURL",value:function(){return getFullPath()}},{key:"getCurrentPath",value:function(){return getPathName()}},{key:"getCurrentHash",value:function(){return window.location.hash.substring(1)}},{key:"go",value:function(url){if(isCurrentPath(url))return!1;history.pushState(_defineProperty({},STATE_KEY,!0),parent.document.title,url);var state=history.state;return updateHistoryStack(),pathParams={},void 0!==state&&""!==state&&(!0!==state[STATE_KEY]&&!0!==state.data[STATE_KEY]||this.route()),!0}},{key:"setURL",value:function(url){url=this.transformURL(url),settingURL=!0,this.go(url)||(settingURL=!1)}},{key:"overrideURL",value:function(url){url=this.transformURL(url),history.replaceState(_defineProperty({},STATE_KEY,!0),parent.document.title,url)}},{key:"updateURL",value:function(url){settingURL=!0,this.overrideURL(url)}},{key:"navigateTo",value:function(url,force){isCurrentPath(url=this.transformURL(url))?force&&this.route():this.go(url)&&fetchQueryParams()}},{key:"goBack",value:function(backwardURL){if(!backwardURL&&!(backwardURL=historyStack.slice(-1)[0]))return!1;backwardURL=this.transformURL(backwardURL);var backwardIndex=historyStack.lastIndexOf(backwardURL);if(-1===backwardIndex)this.navigateTo(backwardURL);else{var stackLen=historyStack.length,negativeIndex=backwardIndex-stackLen;historyStack.splice(stackLen+negativeIndex,-negativeIndex),history.go(negativeIndex)}}},{key:"peekStack",value:function(){return historyStack.slice()}},{key:"getQueryParam",value:function(param_name){return getFullUrl()!==currentUrl&&(currentUrl=getFullUrl(),fetchQueryParams()),queryParams[param_name]}},{key:"getPathParam",value:function(param_name){return pathParams[param_name]}},{key:"updateQueryParams",value:function(new_params,drop_existing,route_type,route_options){route_type||(route_type=this.RouteTypes.NAVIGATE),drop_existing?queryParams=new_params:Object.assign(queryParams,new_params),_route(route_type,route_options)}},{key:"removeQueryParams",value:function(param_keys,route_type,route_options){loop(param_keys,function(idx,key){delete queryParams[key]}),_route(route_type,route_options)}},{key:"getURLPatternByPageName",value:function(view_name){var matched_pattern=null;return loop(registeredUrlPatterns,function(pattern,options){if(options.view_name===view_name)return matched_pattern=pattern,!1}),matched_pattern}}]),Router}();AdharaRouter=Router,window.onpopstate=function(e){AdharaRouter.route()},AdharaRouter.RouteTypes=Object.freeze({NAVIGATE:"navigate",OVERRIDE:"override",SET:"set",UPDATE:"update"}),AdharaRouter.enableAllAnchors=!0,AdharaRouter.listen=function(){function hasAttribute(elem,attribute_name){return elem.hasAttribute(attribute_name)}function routeHandler(event){var re=function(event){return"A"!==event.target.nodeName?event.currentTarget:event.target}(event);if((AdharaRouter.enableAllAnchors||hasAttribute(re,"route"))&&hasAttribute(re,"href")){var target=this.getAttribute("target"),miniURL=this.getAttribute("href").trim(),isHash=0===miniURL.indexOf("#");if(target&&"_self"!==target||-1!==miniURL.indexOf("javascript")||isHash)return;var url=miniURL;try{if(new URL(url).host!==window.location.host)return}catch(e){}url&&(event.preventDefault(),event.stopPropagation());var go_back=this.getAttribute("data-back"),force="false"!==this.getAttribute("data-force");if(go_back)return AdharaRouter.goBack(url);AdharaRouter.navigateTo(url,force)}}jQuery(document).on("click","a",routeHandler),jQuery(document).on("click","[route]",routeHandler)},updateHistoryStack()}();var RestAPI={};!function(){function isFullURL(link){return link.startsWith("http://")||link.startsWith("https://")||link.startsWith("//")}function send(o){var url;o.url=isFullURL(url=o.url)?url:(Adhara.app?Adhara.app.apiServerURL:"/")+url;var fns=o.success,fnf=o.failure;o.success=function(d,s,x){RestAPI.handle_api_success(fns,fnf,d,s,x,o.handleError,o.successMessage)},o.error=function(x,s,e){RestAPI.handle_api_failure(fnf,x,s,e)},o.headers=RestAPI.getHeaders(o.url,o.type),o.data instanceof FormData?function(o){var xhr=new XMLHttpRequest;xhr.open(o.type.toUpperCase(),o.url),loop(o.headers,function(header,value){xhr.setRequestHeader(header,value)}),xhr.onreadystatechange=function(){xhr.readyState===XMLHttpRequest.DONE&&(200===xhr.status?o.success(xhr.responseText,"success",xhr):o.error(xhr,"error",xhr.responseText))},xhr.send(o.data)}(o):function(o){"get"!==o.type&&o.data instanceof Object&&(Object.keys(o.data).length?o.data=JSON.stringify(o.data):delete o.data);"get"!==o.type&&"delete"!==o.type&&(o.headers["Content-Type"]="application/json");jQuery.ajax(o)}(o)}RestAPI.error_codes={not_found:404},RestAPI.getCookie=function(name){var cookieValue=null;if(document.cookie&&""!==document.cookie)for(var cookies=document.cookie.split(";"),i=0;i<cookies.length;i++){var cookie=jQuery.trim(cookies[i]);if(cookie.substring(0,name.length+1)===name+"="){cookieValue=decodeURIComponent(cookie.substring(name.length+1));break}}return cookieValue},RestAPI.getHeaders=function(url,method){return isFullURL(url)?{}:{"X-CSRFToken":RestAPI.getCookie("csrftoken")}},RestAPI.handle_api_success=function(fns,fne,d,s,x){if("nocontent"!==s){if("success"===s){if(x.getResponseHeader("Content-Disposition"))return call_fn(fns,d,x);if("string"==typeof d)try{d=JSON.parse(d)}catch(e){}return call_fn(fns,d,x)}call_fn(fne,d,x)}},RestAPI.handle_api_failure=function(fne,x,s,e){0===x.readyState&&0===x.status&&""===e&&(e="Unable to connect to server"),call_fn(fne,e,x)},RestAPI.post=function(o){o.type="post",send(o)},RestAPI.get=function(o){o.type="get",send(o)},RestAPI.put=function(o){o.type="put",send(o)},RestAPI.patch=function(o){o.type="patch",send(o)},RestAPI.delete=function(o){o.type="delete",send(o)}}();var Toast={make:function(title,content,type){return Adhara.app?Adhara.app.toast(title,content,type):window.ToastHandler?window.ToastHandler[type](content,title):void console.log("No toast handler found. Toast message: type-"+type+", title-"+title+", content="+content)},error:function(message){return Toast.make("Error!",message,"error")},success:function(message){return Toast.make("Success",message,"success")}},AdharaDefaultToaster={};function deserialize(str,context){if("object"===(void 0===context?"undefined":_typeof(context))&&context.blob){var data=JSON.parse(str);return new context.blob(data)}if(context){var _data=JSON.parse(str);return new context.blob(_data)}throw new Error("context passed is invalid: "+context)}function isPrimitive(ob){return ob!==Object(ob)}!function(){var notifyQueue=0;AdharaDefaultToaster.make=function(title,content,type){var maxNotificationsHeight=window.innerHeight-200,currentNotificationsHeight=0;jQuery.each(jQuery(".notification"),function(){currentNotificationsHeight+=jQuery(this).height()+40});var proceed=currentNotificationsHeight<maxNotificationsHeight,notifyTimeout=0===notifyQueue?0:2e3;content||"failure"!==type||(content="Error occurred...");var nid=performance.now();return setTimeout(function(){0===notifyQueue&&proceed?(notifyQueue++,function(title,content,type,id){id="notification_"+id;var $notificationDiv=jQuery('<div class="notification '+type+'" id="'+id+'"/>'),$title=jQuery('<strong style="display:block" />').text(title),$content=jQuery("<p />").html(content);$notificationDiv.append($title).append($content),jQuery("body").append($notificationDiv);var existing_notifications=jQuery(".notification");existing_notifications.length>0&&jQuery.each(existing_notifications,function(index,value){if(jQuery(this).attr("id")!==id){var new_top=parseFloat(jQuery(this).css("top"))+$notificationDiv.height()+40;jQuery(this).animate({top:new_top+"px"},"fast")}}),jQuery("#"+id).animate({right:"0px"},"fast",function(){notifyQueue--}),setTimeout(function(){jQuery("#"+id).animate({opacity:"0.5"},"fast",function(){jQuery("#"+id).hide("slide",{direction:"right"},"slow",function(){setTimeout(function(){jQuery("#"+id).remove()},1e3)})})},5e3)}(title,content,type,nid)):AdharaDefaultToaster.make(title,content,type)},notifyTimeout),{remove:function(){jQuery("#notification_"+nid).remove()}}}}();var Serializable=function(){function Serializable(data){if(_classCallCheck(this,Serializable),!Serializable._validateData(data))throw new Error("blob must be initialized with serializable(tree-like, non-array) object: "+data)}return _createClass(Serializable,null,[{key:"_validateData",value:function(data){if(isPrimitive(data))return!0;if("object"!==(void 0===data?"undefined":_typeof(data))||null===data||data instanceof Array)return!0;var eq_success=function equivalence(ob1,ob2){if(isPrimitive(ob1)&&isPrimitive(ob2))return ob1===ob2;if(isPrimitive(ob1)!==isPrimitive(ob2))return!1;for(var key in ob1)if(ob1.hasOwnProperty(key)&&!equivalence(ob1[key],ob2[key]))return!1;return!0}(JSON.parse(JSON.stringify(data)),data);return eq_success||console.warn("Equivalence check failed for the data. Data is not serializable.",data),eq_success}}]),_createClass(Serializable,[{key:"serialize",value:function(){throw new Error("Need to define method: serialize")}}]),Serializable}(),DataBlob=function(_Serializable){function DataBlob(data){_classCallCheck(this,DataBlob);var _this4=_possibleConstructorReturn(this,(DataBlob.__proto__||Object.getPrototypeOf(DataBlob)).call(this,data));if(!data)return _possibleConstructorReturn(_this4);if(_this4._data=data,!1===_this4.validate(data))throw new Error("assigned data does not clear the custom validation: "+data);return _this4.onInit(),_this4}return _inherits(DataBlob,Serializable),_createClass(DataBlob,[{key:"onInit",value:function(){}},{key:"validate",value:function(){return!0}},{key:"_formatTimeBit",value:function(value){return(1===value.toString().length?"0":"")+value.toString()}},{key:"_formatTime",value:function(date){return this._formatTimeBit(date.getHours())+":"+this._formatTimeBit(date.getMinutes())+":"+this._formatTimeBit(date.getSeconds())}},{key:"_formatDate",value:function(date){return this._formatTimeBit(date.getMonth()+1)+"/"+this._formatTimeBit(date.getDate())+"/"+date.getFullYear()}},{key:"data",get:function(){return this._data},set:function(data){if(!Serializable._validateData(data))throw new Error("blob must represent a non-array, tree-like object "+data);if(!1===this.validate(data))throw new Error("assigned data does not clear the custom validation: "+data);this._data=data}},{key:"packet",get:function(){return this.serialize()}}],[{key:"_context",get:function(){return"base"}}]),DataBlob}(),AdharaController=function(){function AdharaController(){_classCallCheck(this,AdharaController)}return _createClass(AdharaController,[{key:"control",value:function(method,entity_config,data,options){return Adhara.dataInterface.enqueue(method,entity_config,data,options)}},{key:"getData",value:function(entity_config,data,options){this.control("get",entity_config,data,options)}},{key:"getListData",value:function(entity_config,data,options){this.control("get_list",entity_config,data,options)}},{key:"putData",value:function(entity_config,data,options){this.control("put",entity_config,data,options)}},{key:"postData",value:function(entity_config,data,options){this.control("post",entity_config,data,options)}},{key:"deleteData",value:function(entity_config,data,options){this.control("delete",entity_config,data,options)}}]),AdharaController}(),AdharaView=function(_AdharaController){function AdharaView(parentViewInstance){_classCallCheck(this,AdharaView);var _this5=_possibleConstructorReturn(this,(AdharaView.__proto__||Object.getPrototypeOf(AdharaView)).call(this));return _this5._parentViewInstance=parentViewInstance,Adhara.addViewToInstances(_this5),_this5._data=null,_this5._state={},_this5._error=null,_this5._event_listeners={},_this5.is_active=!1,_this5._registerEvents(["ViewRendered","SubViewsRendered","ViewFormatted","ViewDestroyed"]),_this5._registerEvents(_this5.events),_this5.onInit(),_this5}return _inherits(AdharaView,AdharaController),_createClass(AdharaView,[{key:"onInit",value:function(){}},{key:"_registerEvents",value:function(event_names){var _this6=this,_loop=function(event_name){_this6._event_listeners[event_name]=[],_this6["on"+event_name]=function(handler){_this6._event_listeners[event_name].push(handler)},_this6["off"+event_name]=function(handler){_this6._event_listeners[event_name].splice(_this6._event_listeners[event_name].indexOf(handler),1)}},_iteratorNormalCompletion4=!0,_didIteratorError4=!1,_iteratorError4=void 0;try{for(var _step4,_iterator4=event_names[Symbol.iterator]();!(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done);_iteratorNormalCompletion4=!0){_loop(_step4.value)}}catch(err){_didIteratorError4=!0,_iteratorError4=err}finally{try{!_iteratorNormalCompletion4&&_iterator4.return&&_iterator4.return()}finally{if(_didIteratorError4)throw _iteratorError4}}}},{key:"trigger",value:function(event_name){for(var _len3=arguments.length,data=Array(_len3>1?_len3-1:0),_key3=1;_key3<_len3;_key3++)data[_key3-1]=arguments[_key3];var _iteratorNormalCompletion5=!0,_didIteratorError5=!1,_iteratorError5=void 0;try{for(var _step5,_iterator5=this._event_listeners[event_name][Symbol.iterator]();!(_iteratorNormalCompletion5=(_step5=_iterator5.next()).done);_iteratorNormalCompletion5=!0){(0,_step5.value)(data)}}catch(err){_didIteratorError5=!0,_iteratorError5=err}finally{try{!_iteratorNormalCompletion5&&_iterator5.return&&_iterator5.return()}finally{if(_didIteratorError5)throw _iteratorError5}}}},{key:"getCustomTemplate",value:function(type){var _iteratorNormalCompletion6=!0,_didIteratorError6=!1,_iteratorError6=void 0;try{for(var _step6,_iterator6=Adhara.viewHierarchy[Symbol.iterator]();!(_iteratorNormalCompletion6=(_step6=_iterator6.next()).done);_iteratorNormalCompletion6=!0){var ViewClass=_step6.value;if(ViewClass.isPrototypeOf(this.constructor)&&Adhara.app.customViewConfig[type]&&Adhara.app.customViewConfig[type][ViewClass.name])return Adhara.app.customViewConfig[type][ViewClass.name]}}catch(err){_didIteratorError6=!0,_iteratorError6=err}finally{try{!_iteratorNormalCompletion6&&_iterator6.return&&_iterator6.return()}finally{if(_didIteratorError6)throw _iteratorError6}}}},{key:"getTemplate",value:function(){return this.state.fetching_data?this.fetchingDataTemplate:this.errors&&this.errorTemplate||this.template}},{key:"getURLPathParams",value:function(batch_identifier){return null}},{key:"formatURL",value:function(url,params){if(!params)return url;var match=url.match(/\${([a-zA-Z0-9$_]*)}/gi);if(!match)return url;var this_match=match.map(function(match){return"${this."+/\${([a-zA-Z0-9$_]*)}/.exec(match)[1]+"}"});for(var idx in match)url=url.replace(match[idx],this_match[idx]);return new Function("return `"+url+"`;").call(params)}},{key:"formatEntityConfig",value:function(entity_config){if(entity_config.data_config.hasOwnProperty("batch_data_override")){var _iteratorNormalCompletion7=!0,_didIteratorError7=!1,_iteratorError7=void 0;try{for(var _step7,_iterator7=entity_config.data_config.batch_data_override[Symbol.iterator]();!(_iteratorNormalCompletion7=(_step7=_iterator7.next()).done);_iteratorNormalCompletion7=!0){var one_config=_step7.value,url_path_params=this.getURLPathParams(one_config.identifier);url_path_params&&(one_config.url=this.formatURL(one_config.url,url_path_params))}}catch(err){_didIteratorError7=!0,_iteratorError7=err}finally{try{!_iteratorNormalCompletion7&&_iterator7.return&&_iterator7.return()}finally{if(_didIteratorError7)throw _iteratorError7}}}else{var _url_path_params=this.getURLPathParams();_url_path_params&&(entity_config.data_config.url=this.formatURL(entity_config.data_config.url,_url_path_params))}return entity_config}},{key:"getPayload",value:function(){return this.payload}},{key:"create",value:function(parentViewInstance){parentViewInstance&&AdharaView.isPrototypeOf(parentViewInstance.constructor)&&(this._parentViewInstance=parentViewInstance),Adhara.addToActiveViews(this),this.is_active=!0,this.fetchData()}},{key:"isActive",value:function(){return Adhara.isActiveView(this)&&this.is_active}},{key:"fetchData",value:function(){this._state.fetching_data=!0;var config=this.entityConfig;if(config)return config.data_config.hasOwnProperty("batch_data_override")?(this.render(),this.control(void 0,config)):"get"===Adhara.dataInterface.getHTTPMethod(config.data_config.default_query_type)?(this.render(),this.control(config.data_config.default_query_type,config,this.getPayload())):this.handleDataChange();this.handleDataChange()}},{key:"handleDataChange",value:function(new_data){this.isActive()&&(this.dataChange(new_data),this._state.fetching_data=!1,this.render())}},{key:"handleDataError",value:function(error){this.isActive()&&(this.dataError(error),this._state.fetching_data=!1,this.render())}},{key:"handleBatchData",value:function(map){if(this.isActive()){var errors={},success={};for(var identifier in map)map.hasOwnProperty(identifier)&&(map[identifier].hasOwnProperty("error")?errors[identifier]=map[identifier]:success[identifier]=map[identifier].success);Object.keys(success).length&&this.dataChange(success),Object.keys(errors).length&&this.dataError(errors),this._state.fetching_data=!1,this.render()}}},{key:"dataChange",value:function(new_data){this._data=new_data,this._error=null}},{key:"dataError",value:function(error){this._error=error}},{key:"_getHTML",value:function(template){return Adhara.app.renderTemplate(template||this.getTemplate(),this)}},{key:"_getParentContainer",value:function(){var container=this.parentView.contentContainer;return"string"==typeof container?container:container[this.constructor.name]||container["*"]}},{key:"getParentContainerElement",value:function(){return document.querySelector(this._getParentContainer())}},{key:"_render",value:function(){}},{key:"render",value:function(){var _this7=this,container=this.getParentContainerElement();container?(container.innerHTML=this._getHTML(),this.state.fetching_data||(this.trigger("ViewRendered"),this._format(container),setTimeout(function(){_this7.format(container),_this7.trigger("ViewFormatted")},0),this.renderSubViews(),this.trigger("SubViewsRendered"))):console.warn("No container defined/available",this.constructor.name)}},{key:"renderSubViews",value:function(){var _iteratorNormalCompletion8=!0,_didIteratorError8=!1,_iteratorError8=void 0;try{for(var _step8,_iterator8=(this.subViews||[])[Symbol.iterator]();!(_iteratorNormalCompletion8=(_step8=_iterator8.next()).done);_iteratorNormalCompletion8=!0){var sub_view=_step8.value;Adhara.createView(Adhara.getView(sub_view,this),this)}}catch(err){_didIteratorError8=!0,_iteratorError8=err}finally{try{!_iteratorNormalCompletion8&&_iterator8.return&&_iterator8.return()}finally{if(_didIteratorError8)throw _iteratorError8}}}},{key:"_format",value:function(container){for(var _this8=this,_loop2=function(action){var onActionElements=container.querySelectorAll("[data-on"+action+"]"),_loop3=function(actionElement){if("true"===actionElement.dataset["_ae_"+action+"_"])return"continue";actionElement.addEventListener(action,function(event){var data=actionElement.dataset,action_key="on"+action;if(_this8[data[action_key]])_this8[data[action_key]](event,data,_this8);else{var fn=getValueFromJSON(window,data[action_key]);if(!fn)throw new Error("Invalid function: "+data[action_key]+" in View "+_this8.constructor.name);fn(event,data,_this8)}}),actionElement.dataset["_ae_"+action+"_"]="true"},_iteratorNormalCompletion9=!0,_didIteratorError9=!1,_iteratorError9=void 0;try{for(var _step9,_iterator9=onActionElements[Symbol.iterator]();!(_iteratorNormalCompletion9=(_step9=_iterator9.next()).done);_iteratorNormalCompletion9=!0)_loop3(_step9.value)}catch(err){_didIteratorError9=!0,_iteratorError9=err}finally{try{!_iteratorNormalCompletion9&&_iterator9.return&&_iterator9.return()}finally{if(_didIteratorError9)throw _iteratorError9}}},_arr=["click","change","blur","focus","scroll","contextmenu","copy","cut","dblclick","drag","dragend","dragenter","dragleave","dragover","dragstart","drop","focus","focusin","focusout","input","invalid","mousedown","mouseenter","mouseleave","mouseover","mouseout","mouseup","paste","scroll","show","toggle","wheel","keyup","keydown","keypress"],_i=0;_i<_arr.length;_i++){_loop2(_arr[_i])}}},{key:"format",value:function(container){}},{key:"refresh",value:function(){Adhara.createView(this)}},{key:"onDestroy",value:function(){}},{key:"destroy",value:function(){this.onDestroy(),this.trigger("ViewDestroyed"),this.is_active=!1;try{this.getParentContainerElement().innerHTML=""}catch(e){}}},{key:"events",get:function(){return[]}},{key:"template",get:function(){if(Adhara.router.getCurrentPageName())return Adhara.router.getCurrentPageName().replace(/_/g,"-");var className=this.constructor.name.toLowerCase();return className.endsWith("view")?className.slice(0,className.length-4):className}},{key:"errorTemplate",get:function(){return this.getCustomTemplate("error")||null}},{key:"fetchingDataTemplate",get:function(){return this.getCustomTemplate("fetching_data")||""}},{key:"noDataTemplate",get:function(){return this.getCustomTemplate("no_data")||""}},{key:"payload",get:function(){return null}},{key:"entityConfig",get:function(){var entity_name=Adhara.getViewContext(this);return entity_name?this.formatEntityConfig(Adhara.app.getEntityConfig(entity_name)):null}},{key:"state",get:function(){return this._state}},{key:"isImmortal",get:function(){return!1}},{key:"errors",get:function(){return this._error}},{key:"data",get:function(){return this._data}},{key:"parentView",get:function(){return this._parentViewInstance||Adhara.getView(Adhara.app.containerView)}},{key:"contentContainer",get:function(){throw new Error("implement this method")}},{key:"subViews",get:function(){return[]}}]),AdharaView}(),AdharaListView=function(_AdharaView){function AdharaListView(parentViewInstance){_classCallCheck(this,AdharaListView);var _this9=_possibleConstructorReturn(this,(AdharaListView.__proto__||Object.getPrototypeOf(AdharaListView)).call(this,parentViewInstance));return _this9._page_number=1,_this9.searchText=null,_this9}return _inherits(AdharaListView,AdharaView),_createClass(AdharaListView,[{key:"changeViewType",value:function(event,data){this._listType=data.viewtype,this.refresh(),this.onViewTypeChanged(this.listType)}},{key:"onViewTypeChanged",value:function(new_view_type){}},{key:"previousPage",value:function(){this.setPage(this.pageNumber-1),this.pageChange()}},{key:"nextPage",value:function(){this.setPage(this.pageNumber+1),this.pageChange()}},{key:"firstPage",value:function(){this.setPage(1),this.pageChange()}},{key:"setPage",value:function(page_number){this._page_number=page_number}},{key:"pageChange",value:function(){this.fetchData()}},{key:"getPayload",value:function(){return this.isPaginationRequired?Object.assign({},_get(AdharaListView.prototype.__proto__||Object.getPrototypeOf(AdharaListView.prototype),"getPayload",this).call(this),AdharaListView.getPagePayload(this.pageNumber)):_get(AdharaListView.prototype.__proto__||Object.getPrototypeOf(AdharaListView.prototype),"getPayload",this).call(this)}},{key:"search",value:function(){}},{key:"onSearchToggle",value:function(event,data){event.target===document.activeElement?event.target.classList.add("active"):event.target.classList.remove("active")}},{key:"onSearchCapture",value:function(event,data){event.target.value!==this.searchText&&(this.searchText=event.target.value,this.onSearch(event.target.value))}},{key:"onSearch",value:function(text){console.error('TODO Search is enabled for this list view.\n         So, implement onSearch... search text: "'+text+'"')}},{key:"updateResults",value:function(){this.getParentContainerElement().querySelector(".list-contents").innerHTML=Adhara.app.renderTemplate(this.listTemplate,this)}},{key:"format",value:function(container){if(null!==this.searchText){var $search=container.querySelector('input[type="search"]');$search.focus(),$search.setSelectionRange(this.searchText.length,this.searchText.length)}_get(AdharaListView.prototype.__proto__||Object.getPrototypeOf(AdharaListView.prototype),"format",this).call(this,container)}},{key:"template",get:function(){return"adhara-list"}},{key:"allowedListTypes",get:function(){return[]}},{key:"defaultListType",get:function(){if(this.allowedListTypes.length)return this.allowedListTypes[0];throw new Error("override `get listType`")}},{key:"listType",get:function(){return this._listType?this._listType:this.defaultListType}},{key:"nextType",get:function(){if(this.allowedListTypes.length>1){var currentIndex=this.allowedListTypes.indexOf(this.listType);return this.allowedListTypes[currentIndex+1]||this.allowedListTypes[0]}return null}},{key:"listTemplate",get:function(){return AdharaListView.DEFAULT_TEMPLATES[this.listType].listTemplate}},{key:"headerTemplate",get:function(){return AdharaListView.DEFAULT_TEMPLATES[this.listType].headerTemplate}},{key:"itemTemplate",get:function(){return AdharaListView.DEFAULT_TEMPLATES[this.listType].itemTemplate}},{key:"title",get:function(){return""}},{key:"isPaginationRequired",get:function(){return!1}},{key:"columns",get:function(){return[]}},{key:"noDataAvailable",get:function(){return"No Data Available"}},{key:"menuTemplate",get:function(){return"adhara-list-menu"}},{key:"buttons",get:function(){return[]}},{key:"rowCount",get:function(){return AdharaListView.rowCount}},{key:"pageNumber",get:function(){return this._page_number}},{key:"isFirstPage",get:function(){return 1===this._page_number}},{key:"isLastPage",get:function(){return this.data.length<this.rowCount}}]),AdharaListView}();AdharaListView.rowCount=5,AdharaListView.getPagePayload=function(page){return{page:page}},AdharaListView.VIEW_TYPES={CARD_VIEW:"card",GRID_VIEW:"grid",TEMPLATE_VIEW:"template"},AdharaListView.DEFAULT_TEMPLATES=(_defineProperty(_AdharaListView$DEFAU={},AdharaListView.VIEW_TYPES.CARD_VIEW,{listTemplate:"adhara-card",itemTemplate:"adhara-card-content"}),_defineProperty(_AdharaListView$DEFAU,AdharaListView.VIEW_TYPES.GRID_VIEW,{listTemplate:"adhara-list-grid"}),_defineProperty(_AdharaListView$DEFAU,AdharaListView.VIEW_TYPES.TEMPLATE_VIEW,{listTemplate:"adhara-list-template",headerTemplate:"adhara-list-template-header",itemTemplate:"adhara-list-template-item"}),_AdharaListView$DEFAU);var AdharaFormView=function(_AdharaView2){function AdharaFormView(){return _classCallCheck(this,AdharaFormView),_possibleConstructorReturn(this,(AdharaFormView.__proto__||Object.getPrototypeOf(AdharaFormView)).apply(this,arguments))}return _inherits(AdharaFormView,AdharaView),_createClass(AdharaFormView,[{key:"onSuccess",value:function(data){Toast.success("Success")}},{key:"onError",value:function(error){Toast.error(error)}},{key:"onValidationError",value:function(error){Toast.error(error.message)}},{key:"validate",value:function(data){var validate_fn=this.formElement.getAttribute("validate-data");if(validate_fn)return!!call_fn(validate_fn,data)}},{key:"formatData",value:function(data){var format_fn=this.formElement.getAttribute("format-data");return format_fn&&(data=call_fn(format_fn,data)),data}},{key:"getFieldValue",value:function(field_name){var field=this.formElement[field_name];return"number"===field.type?+field.value:"checkbox"===field.type?field.checked:field.value}},{key:"setFieldValue",value:function(field_name,value){var field=this.formElement[field_name];"checkbox"===field.type?field.checked=!0:field.value=value}},{key:"updateFormState",value:function(submitting){this.formElement.submitting=submitting,this.handleSubmitButton(),submitting||this.reSubmitIfRequired()}},{key:"handleSubmitButton",value:function(){if(!this.duplicateSubmissions){var submit_button=this.submitButton;submit_button?this.formElement.submitting?(submit_button.dataset.tosubmit=submit_button.innerHTML,submit_button.innerHTML=submit_button.dataset.inprogress||Adhara.i18n.getValue("form.processing",[],"")||submit_button.dataset.tosubmit,submit_button.disabled=!0):(submit_button.dataset.inprogress=submit_button.innerHTML,submit_button.innerHTML=submit_button.dataset.tosubmit,submit_button.disabled=!1):console.warn("Unable to discover 'Submit button'. Duplicate submission are not handled.")}}},{key:"getFormData",value:function(){var form=this.formElement,fileElements=Array.prototype.slice.apply(form.querySelectorAll('input[type="file"]')).filter(function(fileElement){return!fileElement.disabled});if(this.handleFileUploads&&fileElements.length)return new FormData(form);var formData=jQuery(form).serializeArray(),apiData={};jQuery.each(formData,function(i,fieldData){apiData[fieldData.name]=fieldData.value});for(var checkboxes=form.querySelectorAll("[type=checkbox]"),i=0;i<checkboxes.length;i++)apiData[checkboxes[i].name]=checkboxes[i].checked;return apiData}},{key:"_handleForm",value:function(){var form=this.formElement;if(!form.checkValidity())return form.reportValidity();if(form.submitting)return!1;var apiData=this.getFormData();try{this.validate(apiData)}catch(e){return this.onValidationError(e)}return apiData=this.formatData(apiData),this.updateFormState(!0),this.control(this.method,this.formEntityConfig,apiData),!0}},{key:"_format",value:function(container){var _this11=this;_get(AdharaFormView.prototype.__proto__||Object.getPrototypeOf(AdharaFormView.prototype),"_format",this).call(this,container),this.errors||"true"!==this.formElement.dataset._ae_&&(this.formElement.dataset._ae_="true",this.formElement.addEventListener("submit",function(event){event.preventDefault(),_this11.submit()}))}},{key:"reSubmitIfRequired",value:function(){this.re_submit=this.duplicateSubmissions&&this.re_submit&&!this._handleForm()}},{key:"submit",value:function(){this.re_submit=!this._handleForm()}},{key:"action",get:function(){return this.formElement?this.formElement.action.split(window.location.host)[1]:""}},{key:"method",get:function(){return this.formElement&&this.formElement.getAttribute("api-method")||"post"}},{key:"formEntityConfig",get:function(){var _this12=this,form=this.formElement;return Adhara.app.getEntityConfigFromContext({data_config:{url:this.formatURL(this.action,this.getURLPathParams()),allowed_query_types:[this.method],default_query_type:this.method},processor:{success:function(query_type,entity_config,response){_this12.clearFormOnSuccess&&form.reset(),_this12.updateFormState(!1),_this12.onSuccess(response)},error:function(query_type,entity_config,_error){_this12.updateFormState(!1),_this12.onError(_error)}}})}},{key:"duplicateSubmissions",get:function(){return!1}},{key:"clearFormOnSuccess",get:function(){return"true"===this.formElement.getAttribute("form-clear")}},{key:"formElement",get:function(){if(this._formElement&&document.body.contains(this._formElement)||(this._formElement=this.getParentContainerElement().querySelector("form")),!this._formElement)throw new Error("No from element discovered!");return this._formElement}},{key:"handleFileUploads",get:function(){return!0}},{key:"submitButton",get:function(){return this.formElement.querySelector('[type="submit"]')}}]),AdharaFormView}(),AdharaGridView=function(_AdharaListView){function AdharaGridView(){return _classCallCheck(this,AdharaGridView),_possibleConstructorReturn(this,(AdharaGridView.__proto__||Object.getPrototypeOf(AdharaGridView)).apply(this,arguments))}return _inherits(AdharaGridView,AdharaListView),_createClass(AdharaGridView,[{key:"listType",get:function(){return AdharaListView.VIEW_TYPES.GRID_VIEW}},{key:"tableClass",get:function(){return"table-bordered table-hover"}}]),AdharaGridView}(),AdharaTemplateView=function(_AdharaListView2){function AdharaTemplateView(){return _classCallCheck(this,AdharaTemplateView),_possibleConstructorReturn(this,(AdharaTemplateView.__proto__||Object.getPrototypeOf(AdharaTemplateView)).apply(this,arguments))}return _inherits(AdharaTemplateView,AdharaListView),_createClass(AdharaTemplateView,[{key:"listType",get:function(){return AdharaListView.VIEW_TYPES.TEMPLATE_VIEW}},{key:"tableClass",get:function(){return"table-bordered table-hover"}},{key:"containerAttributes",get:function(){return{}}}]),AdharaTemplateView}(),AdharaCardView=function(_AdharaListView3){function AdharaCardView(){return _classCallCheck(this,AdharaCardView),_possibleConstructorReturn(this,(AdharaCardView.__proto__||Object.getPrototypeOf(AdharaCardView)).apply(this,arguments))}return _inherits(AdharaCardView,AdharaListView),_createClass(AdharaCardView,[{key:"listType",get:function(){return AdharaListView.VIEW_TYPES.CARD_VIEW}},{key:"containerClass",get:function(){return""}},{key:"cardSizeClass",get:function(){return"col-md-4"}}]),AdharaCardView}(),AdharaDialogView=function(_AdharaView3){function AdharaDialogView(){return _classCallCheck(this,AdharaDialogView),_possibleConstructorReturn(this,(AdharaDialogView.__proto__||Object.getPrototypeOf(AdharaDialogView)).apply(this,arguments))}return _inherits(AdharaDialogView,AdharaView),_createClass(AdharaDialogView,[{key:"onInit",value:function(){this._modalId="adhara-dialog-id-"+Date.now(),this.destroy=this.destroy.bind(this)}},{key:"getParentContainerElement",value:function(){return document.querySelector("#"+this.wrapperId)}},{key:"render",value:function(){this.destroy();var dialog_elements=document.querySelectorAll("#"+this.modalId);if(dialog_elements&&dialog_elements.length)for(var i=0;i<dialog_elements.length;i++)dialog_elements[i].remove();var wrapper=document.createElement("div");wrapper.id=this.wrapperId,wrapper.classList.add("adhara-dialog"),document.querySelector("body").appendChild(wrapper),_get(AdharaDialogView.prototype.__proto__||Object.getPrototypeOf(AdharaDialogView.prototype),"render",this).call(this)}},{key:"format",value:function(){this.isAutoShow&&this.show()}},{key:"show",value:function(){var _this17=this;this.modalElement.modal("show"),this.destroyOnClose&&setTimeout(function(){_this17.modalElement.on("hidden.bs.modal",_this17.destroy)},0)}},{key:"hide",value:function(){this.modalElement.modal("hide")}},{key:"onDestroy",value:function(){var wrapper_element=document.getElementById(this.wrapperId);wrapper_element&&wrapper_element.remove()}},{key:"template",get:function(){return"adhara-dialog"}},{key:"titleTemplate",get:function(){return"Adhara Dialog"}},{key:"messageTemplate",get:function(){return"Adhara Dialog Message!"}},{key:"buttons",get:function(){return[{attributes:{type:"button",class:"btn btn-secondary","data-dismiss":"modal"},text:"Close"}]}},{key:"modalId",get:function(){return this._modalId}},{key:"wrapperId",get:function(){return this.modalId+"-wrapper"}},{key:"modalElement",get:function(){return this._modalElemnt&&document.body.contains(this._modalElemnt[0])||(this._modalElemnt=$("#"+this.modalId)),this._modalElemnt}},{key:"isAutoShow",get:function(){return!0}},{key:"destroyOnClose",get:function(){return!0}}]),AdharaDialogView}(),AdharaTabView=function(_AdharaView4){function AdharaTabView(){return _classCallCheck(this,AdharaTabView),_possibleConstructorReturn(this,(AdharaTabView.__proto__||Object.getPrototypeOf(AdharaTabView)).apply(this,arguments))}return _inherits(AdharaTabView,AdharaView),_createClass(AdharaTabView,[{key:"onTabShow",value:function(){}},{key:"onTabClick",value:function(){}},{key:"onTabChange",value:function(){}},{key:"format",value:function(){}},{key:"renderSubViews",value:function(){Adhara.createView(Adhara.getView(this.currentTab.view,this))}},{key:"template",get:function(){return"adhara-tab-view"}},{key:"containerClass",get:function(){return"nav nav-pills"}},{key:"tabNavClass",get:function(){return"custom-tabs-line tabs-line-bottom left-aligned"}},{key:"tabListClass",get:function(){return"nav"}},{key:"tabs",get:function(){return[]}},{key:"currentTab",get:function(){var current_tab_link_from_url=Adhara.router.getCurrentURL(),current_Tab=this.tabs.filter(function(tab){return tab.link===current_tab_link_from_url});return current_Tab.length?current_Tab[0]:this.tabs[0]}},{key:"tabsList",get:function(){var current_tab_id=this.currentTab.id;return this.tabs.map(function(tab){return tab.className=tab.id===current_tab_id?"active":"",tab})}},{key:"nextSelector",get:function(){return".btn-next"}},{key:"previousSelector",get:function(){return".btn-previous"}},{key:"contentContainer",get:function(){return".tab-content .tab-pane"}}]),AdharaTabView}(),AdharaContainerView=function(_AdharaView5){function AdharaContainerView(){return _classCallCheck(this,AdharaContainerView),_possibleConstructorReturn(this,(AdharaContainerView.__proto__||Object.getPrototypeOf(AdharaContainerView)).apply(this,arguments))}return _inherits(AdharaContainerView,AdharaView),_createClass(AdharaContainerView,[{key:"_getParentContainer",value:function(){return Adhara.app.DOMSelector}},{key:"template",get:function(){return"container"}},{key:"isImmortal",get:function(){return!0}},{key:"contentContainer",get:function(){return"main"}}]),AdharaContainerView}(),AdharaDialogFormView=function(_MutateViews){function AdharaDialogFormView(){return _classCallCheck(this,AdharaDialogFormView),_possibleConstructorReturn(this,(AdharaDialogFormView.__proto__||Object.getPrototypeOf(AdharaDialogFormView)).apply(this,arguments))}return _inherits(AdharaDialogFormView,MutateViews(AdharaFormView,AdharaDialogView)),_createClass(AdharaDialogFormView,[{key:"primaryAction",value:function(){this.submit()}},{key:"primaryActionTitle",get:function(){return"Save"}},{key:"submitButton",get:function(){return this.getParentContainerElement().querySelector("button.btn-primary")}},{key:"buttons",get:function(){return this.primaryActionTitle?[_get(AdharaDialogFormView.prototype.__proto__||Object.getPrototypeOf(AdharaDialogFormView.prototype),"buttons",this)[0],{attributes:{type:"button",class:"btn btn-primary","data-onclick":"primaryAction"},text:this.primaryActionTitle}]:_get(AdharaDialogFormView.prototype.__proto__||Object.getPrototypeOf(AdharaDialogFormView.prototype),"buttons",this)}}]),AdharaDialogFormView}(),AdharaStorage=function(){function AdharaStorage(){_classCallCheck(this,AdharaStorage)}return _createClass(AdharaStorage,[{key:"select",value:function(database_name,dataset_name){throw new Error("return a StorageOperator instance from this method. create a `class xStorageOperator extends AdharaStorageOperator{...}`")}}]),AdharaStorage}(),AdharaStorageOperator=function(){function AdharaStorageOperator(dataset){_classCallCheck(this,AdharaStorageOperator),this.dataset=dataset}return _createClass(AdharaStorageOperator,[{key:"store",value:function(key,value){throw new Error("Override `store` method")}},{key:"retrieve",value:function(key){throw new Error("Override `retrieve` method")}},{key:"remove",value:function(key){throw new Error("Override `remove` method")}},{key:"removeAll",value:function(){return this.removeMultiple(function(){return!0})}},{key:"removeMultiple",value:function(filter){var _ref4,_this21=this;return this.keys().then((_ref4=_asyncToGenerator(regeneratorRuntime.mark(function _callee(keys){var key_promises,_iteratorNormalCompletion10,_didIteratorError10,_iteratorError10,_iterator10,_step10,key,data,data_promises,i,datum,_key4;return regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:key_promises=[],_iteratorNormalCompletion10=!0,_didIteratorError10=!1,_iteratorError10=void 0,_context.prev=4,_iterator10=keys[Symbol.iterator]();case 6:if(_iteratorNormalCompletion10=(_step10=_iterator10.next()).done){_context.next=16;break}return key=_step10.value,_context.t0=key_promises,_context.next=11,_this21.retrieve(key);case 11:_context.t1=_context.sent,_context.t0.push.call(_context.t0,_context.t1);case 13:_iteratorNormalCompletion10=!0,_context.next=6;break;case 16:_context.next=22;break;case 18:_context.prev=18,_context.t2=_context.catch(4),_didIteratorError10=!0,_iteratorError10=_context.t2;case 22:_context.prev=22,_context.prev=23,!_iteratorNormalCompletion10&&_iterator10.return&&_iterator10.return();case 25:if(_context.prev=25,!_didIteratorError10){_context.next=28;break}throw _iteratorError10;case 28:return _context.finish(25);case 29:return _context.finish(22);case 30:return _context.next=32,Promise.all(key_promises);case 32:for(data=_context.sent,data_promises=[],i=0;i<data.length;i++)datum=data[i],_key4=keys[i],filter(_key4,datum)&&data_promises.push(_this21.remove(_key4));return _context.next=37,Promise.all(data_promises);case 37:return _context.abrupt("return",_context.sent);case 38:case"end":return _context.stop()}},_callee,_this21,[[4,18,22,30],[23,,25,29]])})),function(_x){return _ref4.apply(this,arguments)}))}},{key:"keys",value:function(){throw new Error("Override `keys` method")}}]),AdharaStorageOperator}(),StorageSelector=function(){function StorageSelector(){_classCallCheck(this,StorageSelector)}return _createClass(StorageSelector,null,[{key:"select",value:function(){return window.hasOwnProperty("indexedDB")?AdharaDBStorage:AdharaCacheStorage}}]),StorageSelector}(),AdharaDBStorage=function(_AdharaStorage){function AdharaDBStorage(){_classCallCheck(this,AdharaDBStorage);var _this22=_possibleConstructorReturn(this,(AdharaDBStorage.__proto__||Object.getPrototypeOf(AdharaDBStorage)).call(this));function promisifyRequest(request){return new Promise(function(resolve,reject){request.onsuccess=function(){resolve(request.result)},request.onerror=function(){reject(request.error)}})}function promisifyRequestCall(obj,method,args){var request=void 0,p=new Promise(function(resolve,reject){promisifyRequest(request=obj[method].apply(obj,args)).then(resolve,reject)});return p.request=request,p}function proxyProperties(ProxyClass,targetProp,properties){properties.forEach(function(prop){Object.defineProperty(ProxyClass.prototype,prop,{get:function(){return this[targetProp][prop]},set:function(val){this[targetProp][prop]=val}})})}function proxyRequestMethods(ProxyClass,targetProp,Constructor,properties){properties.forEach(function(prop){prop in Constructor.prototype&&(ProxyClass.prototype[prop]=function(){return promisifyRequestCall(this[targetProp],prop,arguments)})})}function proxyMethods(ProxyClass,targetProp,Constructor,properties){properties.forEach(function(prop){prop in Constructor.prototype&&(ProxyClass.prototype[prop]=function(){return this[targetProp][prop].apply(this[targetProp],arguments)})})}function proxyCursorRequestMethods(ProxyClass,targetProp,Constructor,properties){properties.forEach(function(prop){prop in Constructor.prototype&&(ProxyClass.prototype[prop]=function(){return obj=this[targetProp],(p=promisifyRequestCall(obj,prop,arguments)).then(function(value){if(value)return new Cursor(value,p.request)});var obj,p})})}function Index(index){this._index=index}function Cursor(cursor,request){this._cursor=cursor,this._request=request}function ObjectStore(store){this._store=store}function Transaction(idbTransaction){this._tx=idbTransaction,this.complete=new Promise(function(resolve,reject){idbTransaction.oncomplete=function(){resolve()},idbTransaction.onerror=function(){reject(idbTransaction.error)},idbTransaction.onabort=function(){reject(idbTransaction.error)}})}function UpgradeDB(db,oldVersion,transaction){this._db=db,this.oldVersion=oldVersion,this.transaction=new Transaction(transaction)}function DB(db){this._db=db}proxyProperties(Index,"_index",["name","keyPath","multiEntry","unique"]),proxyRequestMethods(Index,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),proxyCursorRequestMethods(Index,"_index",IDBIndex,["openCursor","openKeyCursor"]),proxyProperties(Cursor,"_cursor",["direction","key","primaryKey","value"]),proxyRequestMethods(Cursor,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(methodName){methodName in IDBCursor.prototype&&(Cursor.prototype[methodName]=function(){var cursor=this,args=arguments;return Promise.resolve().then(function(){return cursor._cursor[methodName].apply(cursor._cursor,args),promisifyRequest(cursor._request).then(function(value){return value?new Cursor(value,cursor._request):null})})})}),ObjectStore.prototype.createIndex=function(){return new Index(this._store.createIndex.apply(this._store,arguments))},ObjectStore.prototype.index=function(){return new Index(this._store.index.apply(this._store,arguments))},proxyProperties(ObjectStore,"_store",["name","keyPath","indexNames","autoIncrement"]),proxyRequestMethods(ObjectStore,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),proxyCursorRequestMethods(ObjectStore,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),proxyMethods(ObjectStore,"_store",IDBObjectStore,["deleteIndex"]),Transaction.prototype.objectStore=function(){return new ObjectStore(this._tx.objectStore.apply(this._tx,arguments))},proxyProperties(Transaction,"_tx",["objectStoreNames","mode"]),proxyMethods(Transaction,"_tx",IDBTransaction,["abort"]),UpgradeDB.prototype.createObjectStore=function(){return new ObjectStore(this._db.createObjectStore.apply(this._db,arguments))},proxyProperties(UpgradeDB,"_db",["name","version","objectStoreNames"]),proxyMethods(UpgradeDB,"_db",IDBDatabase,["deleteObjectStore","close"]),DB.prototype.transaction=function(){return new Transaction(this._db.transaction.apply(this._db,arguments))},proxyProperties(DB,"_db",["name","version","objectStoreNames"]),proxyMethods(DB,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(funcName){[ObjectStore,Index].forEach(function(Constructor){Constructor.prototype[funcName.replace("open","iterate")]=function(){var args=Array.prototype.slice.call(arguments),callback=args[args.length-1],nativeObject=this._store||this._index,request=nativeObject[funcName].apply(nativeObject,args.slice(0,-1));request.onsuccess=function(){callback(request.result)}}})}),[Index,ObjectStore].forEach(function(Constructor){Constructor.prototype.getAll||(Constructor.prototype.getAll=function(query,count){var instance=this,items=[];return new Promise(function(resolve){instance.iterateCursor(query,function(cursor){cursor?(items.push(cursor.value),void 0===count||items.length!==count?cursor.continue():resolve(items)):resolve(items)})})})});var idb_open=function(name,version,upgradeCallback){var p=promisifyRequestCall(indexedDB,"open",[name,version]),request=p.request;return request.onupgradeneeded=function(event){upgradeCallback&&upgradeCallback(new UpgradeDB(request.result,event.oldVersion,request.transaction))},p.then(function(db){return new DB(db)})};_this22.dbs={};var _loop4=function(db_config){_this22.dbs[db_config.id]=idb_open(db_config.name,db_config.version,function(upgradeDb){return _this22.createObjectStores(upgradeDb,db_config)})},_iteratorNormalCompletion11=!0,_didIteratorError11=!1,_iteratorError11=void 0;try{for(var _step11,_iterator11=Adhara.app.DBConfig[Symbol.iterator]();!(_iteratorNormalCompletion11=(_step11=_iterator11.next()).done);_iteratorNormalCompletion11=!0){_loop4(_step11.value)}}catch(err){_didIteratorError11=!0,_iteratorError11=err}finally{try{!_iteratorNormalCompletion11&&_iterator11.return&&_iterator11.return()}finally{if(_didIteratorError11)throw _iteratorError11}}return _this22}return _inherits(AdharaDBStorage,AdharaStorage),_createClass(AdharaDBStorage,[{key:"createObjectStores",value:function(upgradeDb,db_config){try{var db_schema=db_config.schema;for(var table_name in db_schema)if(db_schema.hasOwnProperty(table_name)&&!upgradeDb.objectStoreNames.contains(table_name)){var os=upgradeDb.createObjectStore(table_name,db_schema[table_name]),_iteratorNormalCompletion12=!0,_didIteratorError12=!1,_iteratorError12=void 0;try{for(var _step12,_iterator12=db_schema[table_name].indexes[Symbol.iterator]();!(_iteratorNormalCompletion12=(_step12=_iterator12.next()).done);_iteratorNormalCompletion12=!0){var index=_step12.value;os.createIndex(index.name,index.property,index.options)}}catch(err){_didIteratorError12=!0,_iteratorError12=err}finally{try{!_iteratorNormalCompletion12&&_iterator12.return&&_iterator12.return()}finally{if(_didIteratorError12)throw _iteratorError12}}}return!0}catch(e){return!1}}},{key:"select",value:function(database_name,dataset_name){return new DBStorageOperator(dataset_name,this.dbs[database_name])}}]),AdharaDBStorage}(),DBStorageOperator=function(_AdharaStorageOperato){function DBStorageOperator(dataset,db){_classCallCheck(this,DBStorageOperator);var _this23=_possibleConstructorReturn(this,(DBStorageOperator.__proto__||Object.getPrototypeOf(DBStorageOperator)).call(this,dataset));return _this23.db=db,_this23}return _inherits(DBStorageOperator,AdharaStorageOperator),_createClass(DBStorageOperator,[{key:"retrieve",value:function(key){var _this24=this;return this.db.then(function(db){return db.transaction(_this24.dataset).objectStore(_this24.dataset).get(key)})}},{key:"store",value:function(key,val){var _this25=this;return val||(val=key,key=void 0),this.db.then(function(db){var tx=db.transaction(_this25.dataset,"readwrite");return tx.objectStore(_this25.dataset).put(val,key),tx.complete})}},{key:"remove",value:function(key){var _this26=this;return this.db.then(function(db){var tx=db.transaction(_this26.dataset,"readwrite");return tx.objectStore(_this26.dataset).delete(key),tx.complete})}},{key:"removeAll",value:function(){var _this27=this;return this.db.then(function(db){var tx=db.transaction(_this27.dataset,"readwrite");return tx.objectStore(_this27.dataset).clear(),tx.complete})}},{key:"keys",value:function(){var _this28=this;return this.db.then(function(db){var tx=db.transaction(_this28.dataset),keys=[],store=tx.objectStore(_this28.dataset);return(store.iterateKeyCursor||store.iterateCursor).call(store,function(cursor){cursor&&(keys.push(cursor.key),cursor.continue())}),tx.complete.then(function(){return keys})})}}]),DBStorageOperator}(),AdharaCacheStorage=function(_AdharaStorage2){function AdharaCacheStorage(){_classCallCheck(this,AdharaCacheStorage);var _this29=_possibleConstructorReturn(this,(AdharaCacheStorage.__proto__||Object.getPrototypeOf(AdharaCacheStorage)).call(this));_this29.dbs=AdharaCacheStorageOperator.cache;var _iteratorNormalCompletion13=!0,_didIteratorError13=!1,_iteratorError13=void 0;try{for(var _step13,_iterator13=Adhara.app.DBConfig[Symbol.iterator]();!(_iteratorNormalCompletion13=(_step13=_iterator13.next()).done);_iteratorNormalCompletion13=!0){var db_config=_step13.value;_this29.dbs[db_config.id]||(_this29.dbs[db_config.id]={})}}catch(err){_didIteratorError13=!0,_iteratorError13=err}finally{try{!_iteratorNormalCompletion13&&_iterator13.return&&_iterator13.return()}finally{if(_didIteratorError13)throw _iteratorError13}}return _this29}return _inherits(AdharaCacheStorage,AdharaStorage),_createClass(AdharaCacheStorage,[{key:"select",value:function(database_name,dataset_name){return new AdharaCacheStorageOperator(dataset_name,this.dbs[database_name])}}]),AdharaCacheStorage}(),AdharaCacheStorageOperator=function(_AdharaStorageOperato2){function AdharaCacheStorageOperator(dataset,db){_classCallCheck(this,AdharaCacheStorageOperator);var _this30=_possibleConstructorReturn(this,(AdharaCacheStorageOperator.__proto__||Object.getPrototypeOf(AdharaCacheStorageOperator)).call(this,dataset));return _this30.db=db,_this30}return _inherits(AdharaCacheStorageOperator,AdharaStorageOperator),_createClass(AdharaCacheStorageOperator,[{key:"store",value:function(key,value){return new Promise(function(resolve,reject){AdharaCacheStorageOperator.cache[key]=value,resolve()})}},{key:"retrieve",value:function(key){return new Promise(function(resolve,reject){resolve(AdharaCacheStorageOperator.cache[key])})}},{key:"remove",value:function(key){return new Promise(function(resolve,reject){delete AdharaCacheStorageOperator.cache[key],resolve()})}},{key:"removeAll",value:function(){return new Promise(function(resolve,reject){AdharaCacheStorageOperator.cache={},resolve()})}},{key:"keys",value:function(){return new Promise(function(resolve,reject){resolve(Object.keys(AdharaCacheStorageOperator.cache))})}}]),AdharaCacheStorageOperator}();AdharaCacheStorageOperator.cache={};var DataInterface=function(_StorageSelector$sele){function DataInterface(){_classCallCheck(this,DataInterface);var _this31=_possibleConstructorReturn(this,(DataInterface.__proto__||Object.getPrototypeOf(DataInterface)).call(this));return _this31.config=Adhara.app._diConfig,_this31.request_queue={},_this31.rem_que={},_this31.db_table=_this31.select("default",_this31.config.http_cache_table),_this31.initDependencies(),_this31}return _inherits(DataInterface,StorageSelector.select()),_createClass(DataInterface,[{key:"makeServiceCall",value:function(url,method_name,data,controller){return data=Adhara.app.requestMiddleWare(url,method_name,data),new Promise(function(resolve,reject){controller[method_name]({url:url,data:data,crossDomain:!0,xhrFields:{withCredentials:!0},beforeSend:function(xhr){xhr.withCredentials=!0},success:function(response,xhr){resolve({response:response,xhr:xhr})},failure:function(error,xhr){reject({error:error,xhr:xhr})}})})}},{key:"handle_bulk_config",value:function(query_type,entity_configs,data,opts){if(!(["get","get_list"].indexOf(query_type)<0))for(var num_reqs=entity_configs.length,result=new Array(num_reqs),entry_count=0,caller_viewable=opts.caller_view&&(opts.caller_view instanceof AdharaView||opts.caller_view.hasOwnProperty("handleDataChange")&&"function"==typeof opts.caller_view.handleDataChange),i=0;i<num_reqs;i++){var dummy_entity_config=Object.assign({},entity_configs[i]);dummy_entity_config.processor=function(scoped_i){return{success:function(query_type,entity_config,response,xhr){var processed_data=processor_helper.get_basic_processed_data(query_type,entity_config,response,xhr);result[scoped_i]=processed_data,entry_count++,caller_viewable?entry_count===num_reqs&&opts.caller_view.handleDataChange(result):Adhara.configUtils.getViewInstance(entity_config).handleDataChange(processed_data)},error:function(query_type,entity_config,_error2,xhr){var processed_data=processor_helper.get_basic_processed_data(query_type,entity_config,_error2,xhr);result[scoped_i]=processed_data,entry_count++,caller_viewable?entry_count===num_reqs&&opts.caller_view.handleDataChange(result):Adhara.configUtils.getViewInstance(entity_config).handleDataError(processed_data)}}}(i),this.enqueue(query_type,dummy_entity_config,data,opts)}}},{key:"handle_batch_enqueue",value:function(entity_config){var batch_result_map={},batch_calls=Adhara.configUtils.getDataConfig(entity_config).batch_data_override;function check_fills(obj){for(var k in obj)if(obj.hasOwnProperty(k)&&void 0===obj[k])return!1;return!0}function publishToView(final_batch_data){Adhara.configUtils.getViewInstance(entity_config).handleBatchData(final_batch_data)}var batch_processor={success:function(query_type,entity_config,response,xhr){var blob=Adhara.configUtils.getBlobClass(entity_config),data_config=Adhara.configUtils.getDataConfig(entity_config),processed_data=void 0;if("get_list"===query_type){processed_data=[];var _iteratorNormalCompletion14=!0,_didIteratorError14=!1,_iteratorError14=void 0;try{for(var _step14,_iterator14=response[Symbol.iterator]();!(_iteratorNormalCompletion14=(_step14=_iterator14.next()).done);_iteratorNormalCompletion14=!0){var datum=_step14.value;processed_data.push(new blob(datum))}}catch(err){_didIteratorError14=!0,_iteratorError14=err}finally{try{!_iteratorNormalCompletion14&&_iterator14.return&&_iterator14.return()}finally{if(_didIteratorError14)throw _iteratorError14}}}else processed_data=new blob(response);batch_result_map[data_config.identifier]={success:processed_data},check_fills(batch_result_map)&&publishToView(batch_result_map),processor_helper.on_success_common(query_type,entity_config,response,xhr)},error:function(query_type,entity_config,_error3,xhr){var data_config=Adhara.configUtils.getDataConfig(entity_config);batch_result_map[data_config.identifier]={error:_error3,response_code:xhr.status},check_fills(batch_result_map)&&publishToView(batch_result_map)}},_iteratorNormalCompletion15=!0,_didIteratorError15=!1,_iteratorError15=void 0;try{for(var _step15,_iterator15=batch_calls[Symbol.iterator]();!(_iteratorNormalCompletion15=(_step15=_iterator15.next()).done);_iteratorNormalCompletion15=!0){var batch_call=_step15.value;batch_result_map[batch_call.identifier]=void 0;var dummy_entity_config={data_config:{url:batch_call.url,_url:batch_call.url,identifier:batch_call.identifier,default_query_type:batch_call.query_type||"get",allowed_query_types:["get","get_list"],reuse:batch_call.reuse,blob:batch_call.blob},view:Adhara.configUtils.getViewInstance(entity_config),processor:batch_processor,controller:Adhara.configUtils.getController(entity_config)};this.enqueue(void 0,dummy_entity_config,void 0)}}catch(err){_didIteratorError15=!0,_iteratorError15=err}finally{try{!_iteratorNormalCompletion15&&_iterator15.return&&_iterator15.return()}finally{if(_didIteratorError15)throw _iteratorError15}}}},{key:"isValidStorageData",value:function(stored_data){return stored_data.hasOwnProperty("response")}},{key:"isMethodAllowed",value:function(query_type,http_method,data_config){return-1!==Adhara.app.allowedHttpMethods.indexOf(http_method)||data_config.allowed_query_types&&-1!==data_config.allowed_query_types.indexOf(query_type)}},{key:"isValidDataConfig",value:function(data_config){return data_config instanceof Object&&data_config.allowed_query_types instanceof Array&&"string"==typeof data_config.url&&data_config.allowed_query_types.length>0||data_config instanceof Object&&data_config.batch_data_override instanceof Array}},{key:"isValidProcessor",value:function(processor){return processor instanceof Object&&processor.success instanceof Function&&processor.error instanceof Function}},{key:"isValidEntityConfig",value:function(entity_config){if(entity_config instanceof Object&&this.isValidDataConfig(entity_config.data_config)){if(entity_config.data_config.batch_data_override)return!0;if(entity_config.data_config.allowed_query_types.indexOf("get")>-1||entity_config.data_config.allowed_query_types.indexOf("get_list")>-1){if(this.isValidProcessor(entity_config.processor))return!0;if(!AdharaView.isPrototypeOf(entity_config.view))return!1}return!0}return!1}},{key:"getHTTPMethod",value:function(query_type){return"get_list"===query_type?"get":query_type}},{key:"getUniqueUrlForData",value:function(url,http_method,data){return url+(data?"?"+Object.keys(data).sort().map(function(key){return key+"="+data[key]}).join("&"):"")}},{key:"remember",value:function(url,response,reuse,_url){var _this32=this,_={expires:(reuse.timeout||this.config.reuse_timeout||3e5)+Date.now(),url:_url||url};return"in_page"===reuse.scope&&(_.page_name=Adhara.router.getCurrentPageName()),this.rem_que[url]=response,this.db_table.store({url:url,response:response,_:_}).then(function(){return delete _this32.rem_que[url],!0})}},{key:"recall",value:function(data_url){var _this33=this;return new Promise(function(resolve,reject){_this33.rem_que[data_url]?resolve(_this33.rem_que[data_url]):_this33.db_table.retrieve(data_url).then(function(data){data?isNaN(data._.expires)||data._.expires<(new Date).getTime()?reject({message:"data has expired",code:404}):_this33.isValidStorageData(data)?resolve(data.response):reject({message:"Invalid data "+data.response,code:500}):reject({message:"No such key stored",code:404})},function(e){8===e.code?reject({message:"No such key stored",code:404}):reject({message:e||"Unknown Error",code:500})})})}},{key:"remove",value:function(data_url){return this.db_table.remove(data_url)}},{key:"signalViewSuccess",value:function(query_type,entity_config,response_json,xhr){Adhara.configUtils.getProcessor(entity_config).success(query_type,entity_config,response_json,xhr,!0)}},{key:"signalViewFailure",value:function(query_type,entity_config,error,xhr){Adhara.configUtils.getProcessor(entity_config).error(query_type,entity_config,error,xhr)}},{key:"enqueue",value:function(query_type,entity_config,data,options){var _this34=this;if(!this.isValidEntityConfig(entity_config))throw new Error("Entity config passed to enqueue is invalid: "+JSON.stringify(entity_config,null,4));var data_config=Adhara.configUtils.getDataConfig(entity_config);if(data_config.hasOwnProperty("batch_data_override"))this.handle_batch_enqueue(entity_config);else if(entity_config instanceof Array)this.handle_bulk_config(query_type,entity_config,data,options);else if(this.request_queue[data_config.url]instanceof Array||(this.request_queue[data_config.url]=[]),!(["get","get_list"].indexOf(query_type)<0&&options&&!1!==options.consider_for_queueing&&(options.consider_for_queueing=!1,this.request_queue[data_config.url].push({entry_time:performance.now(),arg:[query_type,entity_config,data,options]}),this.request_queue[data_config.url].length>1))){query_type||(query_type=data_config.default_query_type);var http_method=this.getHTTPMethod(query_type);if(this.isMethodAllowed(query_type,http_method,data_config)){var reuse=data_config.reuse||{};if(!1!==reuse.enable&&!1!==this.config.default_reuse&&-1!==["get","get_list"].indexOf(http_method)){var unique_url=this.getUniqueUrlForData(data_config.url,http_method,data),msc=function(){_this34.makeServiceCall(data_config.url,http_method,data,Adhara.configUtils.getController(entity_config)).then(function(response_object){var response=Adhara.app.responseMiddleWare(entity_config,!0,response_object.response,response_object.xhr);_this34.signalViewSuccess(query_type,entity_config,response,response_object.xhr),_this34.remember(unique_url,response,reuse,data_config._url)},function(error_response_object){_this34.signalViewFailure(query_type,entity_config,Adhara.app.responseMiddleWare(entity_config,!1,error_response_object.error,error_response_object.xhr),error_response_object.xhr)})};this.recall(unique_url).then(function(response){if(reuse instanceof Function&&!reuse(response))msc();else{var xhr=new XMLHttpRequest;_this34.signalViewSuccess(query_type,entity_config,response,xhr)}},function(err){msc()})}else this.makeServiceCall(data_config.url,http_method,data,Adhara.configUtils.getController(entity_config)).then(function(response_object){_this34.signalViewSuccess(query_type,entity_config,Adhara.app.responseMiddleWare(entity_config,!0,response_object.response,response_object.xhr),response_object.xhr)},function(error_response_object){_this34.signalViewFailure(query_type,entity_config,Adhara.app.responseMiddleWare(entity_config,!1,error_response_object.error,error_response_object.xhr),error_response_object.xhr)}).then(function(){_this34.request_queue[data_config.url].shift(),_this34.request_queue[data_config.url].length>0&&(performance.now()-_this34.request_queue[data_config.url][0].entry_time<=3e4?_this34.enqueue.apply(_this34,_toConsumableArray(_this34.request_queue[data_config.url][0].arg)):_this34.request_queue[data_config.url]=[])})}else{this.signalViewFailure(query_type,entity_config,{message:"Unauthorized Request"},405)}}}},{key:"cleanUp",value:function(current_page_name){this.db_table.removeMultiple(function(url,response){return response._.expires<=Date.now()||response._.page_name&&response._.page_name!==current_page_name})}},{key:"initDependencies",value:function(){var _this35=this;Adhara.router.onRoute("DIPageChangeListener",function(){_this35.cleanUp(Adhara.router.getCurrentPageName())})}}]),DataInterface}(),processor_helper={on_success_common:function(query_type,entity_config,response,xhr){var data_config=Adhara.configUtils.getDataConfig(entity_config);if(!data_config)return!1;for(var similar_app_configs=Adhara.configUtils.getSimilarDataConfigs(data_config),views_called=!1,i=0;i<similar_app_configs.length;i++){var processor=Adhara.configUtils.getProcessor(similar_app_configs[i]);processor&&(processor.success(query_type,similar_app_configs[i],response,xhr,!1),views_called=!0)}return views_called},get_basic_processed_data:function(query_type,entity_config,response,xhr){var blob=Adhara.configUtils.getBlobClass(entity_config),processed_data=void 0;if("get_list"===query_type){processed_data=[];var _iteratorNormalCompletion16=!0,_didIteratorError16=!1,_iteratorError16=void 0;try{for(var _step16,_iterator16=response[Symbol.iterator]();!(_iteratorNormalCompletion16=(_step16=_iterator16.next()).done);_iteratorNormalCompletion16=!0){var datum=_step16.value;processed_data.push(new blob(datum))}}catch(err){_didIteratorError16=!0,_iteratorError16=err}finally{try{!_iteratorNormalCompletion16&&_iterator16.return&&_iterator16.return()}finally{if(_didIteratorError16)throw _iteratorError16}}}else processed_data=new blob(response);return processed_data}},Processor={fallback:{success:function(query_type,entity_config,response,xhr,pass_over){var processed_data=processor_helper.get_basic_processed_data(query_type,entity_config,response,xhr),view=Adhara.configUtils.getViewInstance(entity_config);!0===pass_over?!processor_helper.on_success_common(query_type,entity_config,response,xhr)&&view&&view.handleDataChange(processed_data):view&&view.handleDataChange(processed_data)},error:function(query_type,entity_config,_error4,xhr){var processed_data={error:_error4,response_code:xhr.status},view=Adhara.configUtils.getViewInstance(entity_config);view&&view.handleDataError(processed_data)}}},WebSocket=function(){function WebSocket(web_socket_config){_classCallCheck(this,WebSocket);var socket=this.socket=io.connect(web_socket_config.url||"/socket",{resource:web_socket_config.resource||"/"});socket.on("connect_failed",function(data){return console.log("connect_failed",data)}),socket.on("connecting",function(data){return console.log("connecting",data)}),socket.on("disconnect",function(data){return console.log("disconnect",data)}),socket.on("error",function(reason){return console.log("error",reason)}),socket.on("reconnect_failed",function(data){return console.log("reconnect_failed",data)}),socket.on("reconnect",function(data){return console.log("reconnect",data)}),socket.on("reconnecting",function(data){return console.log("reconnecting",data)})}return _createClass(WebSocket,[{key:"listen",value:function(){var _this36=this,config=Adhara.app.config,_loop5=function(app_conf){if(config.hasOwnProperty(app_conf)){var data_config=Adhara.configUtils.getDataConfig(app_conf);if(!data_config.socket_tag)return"continue";_this36.socket.on(data_config.socket_tag,function(data){Adhara.configUtils.getProcessor(app_conf)(data)})}};for(var app_conf in config)_loop5(app_conf)}}]),WebSocket}();WebSocket.listen=function(web_socket_config){new WebSocket(web_socket_config).listen()};var AdharaApp=function(){function AdharaApp(){_classCallCheck(this,AdharaApp)}return _createClass(AdharaApp,[{key:"getEntityConfigFromContext",value:function(context){var allowed_query_types=context.data_config.allowed_query_types?context.data_config.allowed_query_types.slice():[],data_config=void 0;context.data_config.hasOwnProperty("batch_data_override")?data_config={batch_data_override:context.data_config.batch_data_override.map(function(batch_data_config){return batch_data_config.reuse||(batch_data_config.reuse={}),{_url:batch_data_config.url,url:batch_data_config.url,query_type:batch_data_config.query_type,identifier:batch_data_config.identifier,reuse:{enable:batch_data_config.reuse.enable,timeout:batch_data_config.reuse.timeout,scope:batch_data_config.reuse.scope,handler:batch_data_config.reuse.handler},blob:batch_data_config.blob}})}:(context.data_config.reuse||(context.data_config.reuse={}),data_config={_url:context.data_config.url,url:context.data_config.url,allowed_query_types:allowed_query_types,default_query_type:context.data_config.default_query_type||allowed_query_types[0],socket_tag:context.data_config.socket_tag,reuse:{enable:context.data_config.reuse.enable,timeout:context.data_config.reuse.timeout,scope:context.data_config.reuse.scope,handler:context.data_config.reuse.handler},blob:context.data_config.blob});var processor={success:context.processor&&context.processor.success||Processor.fallback.success,error:context.processor&&context.processor.error||Processor.fallback.error},controller={get:context.controller&&context.controller.get||Adhara.restAPI.get,put:context.controller&&context.controller.put||Adhara.restAPI.put,post:context.controller&&context.controller.post||Adhara.restAPI.post,delete:context.controller&&context.controller.delete||Adhara.restAPI.delete};return{data_config:data_config,view:context.view,controller:controller,processor:processor}}},{key:"getEntityConfig",value:function(context_name){return this.getEntityConfigFromContext(this.config[context_name])}},{key:"responseMiddleWare",value:function(entity_config,success,response,xhr){return response}},{key:"requestMiddleWare",value:function(url,method_name,data){return data}},{key:"toast",value:function(title,content,type){return AdharaDefaultToaster.make(title,content,type)}},{key:"renderTemplate",value:function(template,context){return TemplateUtils.execute(template,context)}},{key:"is_debug_mode",get:function(){return-1!==["localhost","127.0.0.1","0.0.0.0"].indexOf(window.location.hostname)||-1!==window.location.hostname.indexOf("192.168.")}},{key:"name",get:function(){return"Adhara App"}},{key:"detailedName",get:function(){return{first:"Adhara",last:"App"}}},{key:"tagLine",get:function(){}},{key:"containerView",get:function(){}},{key:"config",get:function(){return{}}},{key:"customViewConfig",get:function(){return{fetching_data:{AdharaListView:"Fetching Data..."},no_data:{AdharaListView:"No Data Available"}}}},{key:"allowedHttpMethods",get:function(){return["get","post","put","delete"]}},{key:"routerConfiguration",get:function(){return{routes:[],on_route_listeners:{},middlewares:[]}}},{key:"DOMSelector",get:function(){return"app"}},{key:"apiServerURL",get:function(){return"/api"}},{key:"webSocketConfig",get:function(){}},{key:"DBConfig",get:function(){return[{id:"default",name:"Adhara-app_db",version:1,schema:{http_cache:{keyPath:"url"}}}]}},{key:"_diConfig",get:function(){return Object.assign({http_cache_table:"http_cache",default_reuse:!0,reuse_timeout:3e5},this.DIConfig)}},{key:"DIConfig",get:function(){return{}}},{key:"scopes",get:function(){return{global:window}}},{key:"i18n_key_map",get:function(){return{"list_view.navigation.previous":"Previous","list_view.navigation.next":"Next","form.processing":"Processing..."}}}]),AdharaApp}(),Adhara=null;!function(){var AdharaBase=function(){function AdharaBase(){_classCallCheck(this,AdharaBase),this.container=null,this.always_active_views=[],this.active_views=[],this.router=AdharaRouter,this.toast=Toast}return _createClass(AdharaBase,[{key:"init",value:function(app){!function(){var _iteratorNormalCompletion18=!0,_didIteratorError18=!1,_iteratorError18=void 0;try{for(var _step18,_iterator18=on_init_listeners[Symbol.iterator]();!(_iteratorNormalCompletion18=(_step18=_iterator18.next()).done);_iteratorNormalCompletion18=!0){var on_init_listener=_step18.value;on_init_listener()}}catch(err){_didIteratorError18=!0,_iteratorError18=err}finally{try{!_iteratorNormalCompletion18&&_iterator18.return&&_iterator18.return()}finally{if(_didIteratorError18)throw _iteratorError18}}}(),app?(this.app=new app,this.dataInterface=new DataInterface,this.restAPI=RestAPI,this.i18n=new Internationalize(Adhara.app.i18n_key_map),this.createShortcuts(),this.performSystemChecks(),this.createContainer(),this.app.webSocketConfig&&WebSocket.listen(this.app.webSocketConfig)):this.router.route()}},{key:"createShortcuts",value:function(){var _this37=this;this.view_context={},loop(this.app.config,function(context_name,configuration){configuration.hasOwnProperty("view")&&AdharaView.isPrototypeOf(configuration.view)&&(_this37.view_context[configuration.view.name]=context_name)})}},{key:"getViewContext",value:function(viewInstance){return this.view_context[viewInstance.constructor.name]}},{key:"performSystemChecks",value:function(){}},{key:"createContainer",value:function(){var _this38=this;this.router.configure(this.app.routerConfiguration),this.router.listen(),this.app.containerView?(this.container=new this.app.containerView,this.container.onViewRendered(this.router.route),this._clearActiveViews(),this.always_active_views=this.container.subViews.map(function(subView){return Adhara.getView(subView,_this38.container)}),Adhara.createView(this.container),this.always_active_views.push(this.container)):(this._clearActiveViews(),this.router.route())}},{key:"addToActiveViews",value:function(viewInstance){this.isActiveView(viewInstance)||(viewInstance.isImmortal?this.always_active_views.push(viewInstance):this.active_views.push(viewInstance))}},{key:"getActiveView",value:function(classReference){var active_view=this.active_views.filter(function(view_instance){return view_instance.constructor===classReference})[0];return active_view||(active_view=this.always_active_views.filter(function(view_instance){return view_instance.constructor===classReference})[0]),active_view}},{key:"isActiveView",value:function(viewInstance){return-1!==this.active_views.indexOf(viewInstance)||-1!==this.always_active_views.indexOf(viewInstance)}},{key:"_clearActiveViews",value:function(){this.active_views=[]}},{key:"closeActiveViews",value:function(){var _iteratorNormalCompletion17=!0,_didIteratorError17=!1,_iteratorError17=void 0;try{for(var _step17,_iterator17=this.active_views[Symbol.iterator]();!(_iteratorNormalCompletion17=(_step17=_iterator17.next()).done);_iteratorNormalCompletion17=!0){_step17.value.destroy()}}catch(err){_didIteratorError17=!0,_iteratorError17=err}finally{try{!_iteratorNormalCompletion17&&_iterator17.return&&_iterator17.return()}finally{if(_didIteratorError17)throw _iteratorError17}}this._clearActiveViews()}},{key:"templateEngine",get:function(){return{name:"Handlebars",helpersHandler:TemplateEngineHelpers}}},{key:"viewHierarchy",get:function(){return[AdharaContainerView,AdharaDialogView,AdharaTemplateView,AdharaCardView,AdharaGridView,AdharaListView,AdharaFormView,AdharaView]}}]),AdharaBase}(),view_instances={};(Adhara=new AdharaBase).addViewToInstances=function(instance){view_instances[instance.constructor.name]=instance},Adhara.getView=function(viewClass,parentViewInstance){if(!viewClass)throw new Error("invalid view class");var active_view=Adhara.getActiveView(viewClass instanceof Function?viewClass:viewClass.constructor);if(active_view)return active_view;if(parentViewInstance)return new viewClass(parentViewInstance);throw new Error("parent view is required to construct a view. Failed to create view: "+viewClass.constructor.name)},Adhara.createView=function(adhara_view_instance,parentViewInstance){adhara_view_instance.create(parentViewInstance)},Adhara.onRoute=function(view_class){if(Adhara.closeActiveViews(),!Adhara.container.isActive())return Adhara.container.create();Adhara.createView(Adhara.getView(view_class,Adhara.container))};var on_init_listeners=[registerAdharaUtils];Adhara.onInit=function(fn){on_init_listeners.push(fn)},Adhara.lightReload=function(){Adhara.container?Adhara.container.refresh():Adhara.router.route()}}(),this.Handlebars=this.Handlebars||{},this.Handlebars.templates=this.Handlebars.templates||{},this.Handlebars.templates["adhara-card-content"]=Handlebars.template({compiler:[7,">= 4.0.0"],main:function(container,depth0,helpers,partials,data){var helper,alias1=null!=depth0?depth0:container.nullContext||{},alias2=helpers.helperMissing,alias4=container.escapeExpression;return'<div class="card-heading">\n    '+alias4("function"==typeof(helper=null!=(helper=helpers.heading||(null!=depth0?depth0.heading:depth0))?helper:alias2)?helper.call(alias1,{name:"heading",hash:{},data:data}):helper)+'\n</div>\n<div class="card-content">\n    '+alias4("function"==typeof(helper=null!=(helper=helpers.content||(null!=depth0?depth0.content:depth0))?helper:alias2)?helper.call(alias1,{name:"content",hash:{},data:data}):helper)+"\n</div>"},useData:!0}),this.Handlebars.templates["adhara-card"]=Handlebars.template({1:function(container,depth0,helpers,partials,data,blockParams,depths){var alias1=container.escapeExpression;return'        <div class="'+alias1(container.lambda(null!=depths[1]?depths[1].cardSizeClass:depths[1],depth0))+'">\n            <div class="card-md animated card-content-wrapper">\n            '+alias1((helpers.include||depth0&&depth0.include||helpers.helperMissing).call(null!=depth0?depth0:container.nullContext||{},null!=depths[1]?depths[1].itemTemplate:depths[1],blockParams[0][0],{name:"include",hash:{},data:data,blockParams:blockParams}))+"\n            </div>\n        </div>\n"},compiler:[7,">= 4.0.0"],main:function(container,depth0,helpers,partials,data,blockParams,depths){var stack1,helper,alias1=null!=depth0?depth0:container.nullContext||{};return'<div class="'+container.escapeExpression("function"==typeof(helper=null!=(helper=helpers.containerClass||(null!=depth0?depth0.containerClass:depth0))?helper:helpers.helperMissing)?helper.call(alias1,{name:"containerClass",hash:{},data:data,blockParams:blockParams}):helper)+' row">\n'+(null!=(stack1=helpers.each.call(alias1,null!=depth0?depth0.data:depth0,{name:"each",hash:{},fn:container.program(1,data,2,blockParams,depths),inverse:container.noop,data:data,blockParams:blockParams}))?stack1:"")+"</div>"},useData:!0,useDepths:!0,useBlockParams:!0}),this.Handlebars.templates["adhara-dialog"]=Handlebars.template({1:function(container,depth0,helpers,partials,data,blockParams){var stack1,alias1=container.escapeExpression;return"                    <button "+alias1((helpers.addAttr||depth0&&depth0.addAttr||helpers.helperMissing).call(null!=depth0?depth0:container.nullContext||{},null!=(stack1=blockParams[0][0])?stack1.attributes:stack1,'{"type": "button"}',{name:"addAttr",hash:{},data:data,blockParams:blockParams}))+">"+alias1(container.lambda(null!=(stack1=blockParams[0][0])?stack1.text:stack1,depth0))+"</button>\n"},compiler:[7,">= 4.0.0"],main:function(container,depth0,helpers,partials,data,blockParams){var stack1,helper,alias1=null!=depth0?depth0:container.nullContext||{},alias2=helpers.helperMissing,alias3=container.escapeExpression;return'<div class="modal fade" id="'+alias3("function"==typeof(helper=null!=(helper=helpers.modalId||(null!=depth0?depth0.modalId:depth0))?helper:alias2)?helper.call(alias1,{name:"modalId",hash:{},data:data,blockParams:blockParams}):helper)+'" tabindex="-1" role="dialog">\n    <div class="modal-dialog" role="document">\n        <div class="modal-content">\n            <div class="modal-header">\n                <h5 class="modal-title">'+alias3((helpers.include||depth0&&depth0.include||alias2).call(alias1,null!=depth0?depth0.titleTemplate:depth0,depth0,{name:"include",hash:{},data:data,blockParams:blockParams}))+'</h5>\n                <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                    <span aria-hidden="true">&times;</span>\n                </button>\n            </div>\n            <div class="modal-body">\n                <div class="row">\n                    <div class="col-md-12">\n                        <div class="modal-msg">'+alias3((helpers.include||depth0&&depth0.include||alias2).call(alias1,null!=depth0?depth0.messageTemplate:depth0,depth0,{name:"include",hash:{},data:data,blockParams:blockParams}))+'</div>\n                    </div>\n                </div>\n            </div>\n            <div class="modal-footer">\n'+(null!=(stack1=helpers.each.call(alias1,null!=depth0?depth0.buttons:depth0,{name:"each",hash:{},fn:container.program(1,data,2,blockParams),inverse:container.noop,data:data,blockParams:blockParams}))?stack1:"")+"            </div>\n        </div>\n    </div>\n</div>"},useData:!0,useBlockParams:!0}),this.Handlebars.templates["adhara-form-field-input"]=Handlebars.template({compiler:[7,">= 4.0.0"],main:function(container,depth0,helpers,partials,data){var helper,alias1=null!=depth0?depth0:container.nullContext||{},alias2=helpers.helperMissing,alias3=container.escapeExpression;return'<input type="'+alias3("function"==typeof(helper=null!=(helper=helpers.type||(null!=depth0?depth0.type:depth0))?helper:alias2)?helper.call(alias1,{name:"type",hash:{},data:data}):helper)+'" '+alias3((helpers.addAttr||depth0&&depth0.addAttr||alias2).call(alias1,null!=depth0?depth0.attributes:depth0,{name:"addAttr",hash:{},data:data}))+" "+alias3((helpers.addProps||depth0&&depth0.addProps||alias2).call(alias1,null!=depth0?depth0.properties:depth0,{name:"addProps",hash:{},data:data}))+"/>"},useData:!0}),this.Handlebars.templates["adhara-form-field-wrapper"]=Handlebars.template({compiler:[7,">= 4.0.0"],main:function(container,depth0,helpers,partials,data){var alias1=null!=depth0?depth0:container.nullContext||{},alias2=helpers.helperMissing,alias3=container.escapeExpression;return'<div class="adhara-field-wrapper" '+alias3((helpers.addAttr||depth0&&depth0.addAttr||alias2).call(alias1,null!=depth0?depth0.fieldWrapperAttributes:depth0,{name:"addAttr",hash:{},data:data}))+" "+alias3((helpers.addProps||depth0&&depth0.addProps||alias2).call(alias1,null!=depth0?depth0.fieldWrapperProperties:depth0,{name:"addProps",hash:{},data:data}))+">\n    "+alias3((helpers.include||depth0&&depth0.include||alias2).call(alias1,null!=depth0?depth0.fieldTemplate:depth0,depth0,{name:"include",hash:{},data:data}))+"\n</div>"},useData:!0}),this.Handlebars.templates["adhara-form-field"]=Handlebars.template({compiler:[7,">= 4.0.0"],main:function(container,depth0,helpers,partials,data){var alias1=null!=depth0?depth0:container.nullContext||{},alias2=helpers.helperMissing,alias3=container.escapeExpression;return'<div class="adhara-form-field" '+alias3((helpers.addAttr||depth0&&depth0.addAttr||alias2).call(alias1,null!=depth0?depth0.attributes:depth0,{name:"addAttr",hash:{},data:data}))+" "+alias3((helpers.addProps||depth0&&depth0.addProps||alias2).call(alias1,null!=depth0?depth0.properties:depth0,{name:"addProps",hash:{},data:data}))+">\n    "+alias3((helpers.include||depth0&&depth0.include||alias2).call(alias1,null!=depth0?depth0.fieldWrapperTemplate:depth0,depth0,{name:"include",hash:{},data:data}))+"\n</div>"},useData:!0}),this.Handlebars.templates["adhara-list-grid"]=Handlebars.template({1:function(container,depth0,helpers,partials,data,blockParams){var stack1;return"            <th "+(null!=(stack1=helpers.if.call(null!=depth0?depth0:container.nullContext||{},null!=(stack1=blockParams[0][0])?stack1.width:stack1,{name:"if",hash:{},fn:container.program(2,data,0,blockParams),inverse:container.noop,data:data,blockParams:blockParams}))?stack1:"")+">"+container.escapeExpression(container.lambda(null!=(stack1=blockParams[0][0])?stack1.display_name:stack1,depth0))+"</th>\n"},2:function(container,depth0,helpers,partials,data,blockParams){var stack1;return'width="'+container.escapeExpression(container.lambda(null!=(stack1=blockParams[1][0])?stack1.width:stack1,depth0))+'"'},4:function(container,depth0,helpers,partials,data,blockParams,depths){var stack1;return'        <tr adhara-datum-row="'+container.escapeExpression(container.lambda(blockParams[0][1],depth0))+'">\n'+(null!=(stack1=helpers.each.call(null!=depth0?depth0:container.nullContext||{},null!=depths[1]?depths[1].columns:depths[1],{name:"each",hash:{},fn:container.program(5,data,2,blockParams,depths),inverse:container.noop,data:data,blockParams:blockParams}))?stack1:"")+"        </tr>\n"},5:function(container,depth0,helpers,partials,data,blockParams){var stack1,alias1=container.lambda,alias2=container.escapeExpression;return'                <td adhara-datum-col="'+alias2(alias1(blockParams[1][1],depth0))+"-"+alias2(alias1(null!=(stack1=blockParams[0][0])?stack1.name:stack1,depth0))+'" align="'+alias2(alias1(null!=(stack1=blockParams[0][0])?stack1.align:stack1,depth0))+'">\n'+(null!=(stack1=helpers.if.call(null!=depth0?depth0:container.nullContext||{},null!=(stack1=blockParams[0][0])?stack1.trust_as_html:stack1,{name:"if",hash:{},fn:container.program(6,data,0,blockParams),inverse:container.program(8,data,0,blockParams),data:data,blockParams:blockParams}))?stack1:"")+"                </td>\n"},6:function(container,depth0,helpers,partials,data,blockParams){var stack1;return"                        "+(null!=(stack1=(helpers.get||depth0&&depth0.get||helpers.helperMissing).call(null!=depth0?depth0:container.nullContext||{},blockParams[2][0],null!=(stack1=blockParams[1][0])?stack1.name:stack1,{name:"get",hash:{},data:data,blockParams:blockParams}))?stack1:"")+"\n"},8:function(container,depth0,helpers,partials,data,blockParams){var stack1;return"                        "+container.escapeExpression((helpers.get||depth0&&depth0.get||helpers.helperMissing).call(null!=depth0?depth0:container.nullContext||{},blockParams[2][0],null!=(stack1=blockParams[1][0])?stack1.name:stack1,{name:"get",hash:{},data:data,blockParams:blockParams}))+"\n"},compiler:[7,">= 4.0.0"],main:function(container,depth0,helpers,partials,data,blockParams,depths){var stack1,helper,alias1=null!=depth0?depth0:container.nullContext||{};return'<table class="table '+container.escapeExpression("function"==typeof(helper=null!=(helper=helpers.tableClass||(null!=depth0?depth0.tableClass:depth0))?helper:helpers.helperMissing)?helper.call(alias1,{name:"tableClass",hash:{},data:data,blockParams:blockParams}):helper)+'">\n    <thead>\n    <tr>\n'+(null!=(stack1=helpers.each.call(alias1,null!=depth0?depth0.columns:depth0,{name:"each",hash:{},fn:container.program(1,data,2,blockParams,depths),inverse:container.noop,data:data,blockParams:blockParams}))?stack1:"")+"    </tr>\n    </thead>\n    <tbody>\n"+(null!=(stack1=helpers.each.call(alias1,null!=depth0?depth0.data:depth0,{name:"each",hash:{},fn:container.program(4,data,2,blockParams,depths),inverse:container.noop,data:data,blockParams:blockParams}))?stack1:"")+"    </tbody>\n</table>"},useData:!0,useDepths:!0,useBlockParams:!0}),this.Handlebars.templates["adhara-list-menu"]=Handlebars.template({1:function(container,depth0,helpers,partials,data){var helper;return"    <h3>"+container.escapeExpression("function"==typeof(helper=null!=(helper=helpers.title||(null!=depth0?depth0.title:depth0))?helper:helpers.helperMissing)?helper.call(null!=depth0?depth0:container.nullContext||{},{name:"title",hash:{},data:data}):helper)+"</h3>\n"},3:function(container,depth0,helpers,partials,data){var stack1;return'    <div class="mutation-actions table-actions">\n'+(null!=(stack1=helpers.each.call(null!=depth0?depth0:container.nullContext||{},null!=depth0?depth0.buttons:depth0,{name:"each",hash:{},fn:container.program(4,data,0),inverse:container.noop,data:data}))?stack1:"")+"    </div>\n"},4:function(container,depth0,helpers,partials,data){var helper,alias1=null!=depth0?depth0:container.nullContext||{},alias2=helpers.helperMissing,alias3=container.escapeExpression;return"            <button "+alias3((helpers.addAttr||depth0&&depth0.addAttr||alias2).call(alias1,null!=depth0?depth0.attributes:depth0,'{"class": "adhara-template-button"}',{name:"addAttr",hash:{},data:data}))+">"+alias3("function"==typeof(helper=null!=(helper=helpers.title||(null!=depth0?depth0.title:depth0))?helper:alias2)?helper.call(alias1,{name:"title",hash:{},data:data}):helper)+"</button>\n"},6:function(container,depth0,helpers,partials,data){var stack1;return' \n    <div class="data-actions table-actions">\n'+(null!=(stack1=helpers.if.call(null!=depth0?depth0:container.nullContext||{},null!=depth0?depth0.search:depth0,{name:"if",hash:{},fn:container.program(7,data,0),inverse:container.noop,data:data}))?stack1:"")+"    </div>\n"},7:function(container,depth0,helpers,partials,data){var stack1,helper,alias1=null!=depth0?depth0:container.nullContext||{};return'            <input type="search" autofocus\n'+(null!=(stack1=helpers.if.call(alias1,null!=depth0?depth0.searchText:depth0,{name:"if",hash:{},fn:container.program(8,data,0),inverse:container.program(10,data,0),data:data}))?stack1:"")+'                   data-onfocus="onSearchToggle" data-onblur="onSearchToggle"\n                   data-onchange="onSearchCapture" data-onpaste="onSearchCapture" data-onkeyup="onSearchCapture"\n                   value="'+container.escapeExpression("function"==typeof(helper=null!=(helper=helpers.searchText||(null!=depth0?depth0.searchText:depth0))?helper:helpers.helperMissing)?helper.call(alias1,{name:"searchText",hash:{},data:data}):helper)+'"\n            />\n'},8:function(container,depth0,helpers,partials,data){var stack1,alias1=null!=depth0?depth0:container.nullContext||{},alias2=helpers.helperMissing;return"                    "+container.escapeExpression((helpers.addAttr||depth0&&depth0.addAttr||alias2).call(alias1,null!=(stack1=null!=depth0?depth0.search:depth0)?stack1.attributes:stack1,(helpers.append||depth0&&depth0.append||alias2).call(alias1,'{"class": "form-control list-search active"}',{name:"append",hash:{},data:data}),{name:"addAttr",hash:{},data:data}))+"\n"},10:function(container,depth0,helpers,partials,data){var stack1,alias1=null!=depth0?depth0:container.nullContext||{},alias2=helpers.helperMissing;return"                    "+container.escapeExpression((helpers.addAttr||depth0&&depth0.addAttr||alias2).call(alias1,null!=(stack1=null!=depth0?depth0.search:depth0)?stack1.attributes:stack1,(helpers.append||depth0&&depth0.append||alias2).call(alias1,'{"class": "form-control list-search"}',{name:"append",hash:{},data:data}),{name:"addAttr",hash:{},data:data}))+"\n"},12:function(container,depth0,helpers,partials,data){var stack1,helper,alias1=null!=depth0?depth0:container.nullContext||{};return'        <div data-onclick="changeViewType" data-viewtype="'+container.escapeExpression("function"==typeof(helper=null!=(helper=helpers.nextType||(null!=depth0?depth0.nextType:depth0))?helper:helpers.helperMissing)?helper.call(alias1,{name:"nextType",hash:{},data:data}):helper)+'" class="table-actions centre-all pointer">\n        <svg class="a-s-fa-Ha-pa" x="0px" y="0px" width="24px" height="24px" viewBox="0 0 24 24" focusable="false" fill="#6d6d6d">\n'+(null!=(stack1=helpers.if.call(alias1,null!=depth0?depth0.nextType:depth0,"===","card",{name:"if",hash:{},fn:container.program(13,data,0),inverse:container.program(15,data,0),data:data}))?stack1:"")+"            </svg>\n        </div>\n"},13:function(container,depth0,helpers,partials,data){return'                <g><path fill-rule="evenodd" clip-rule="evenodd" d="M3,3v8h8V3H3z M9,9H5V5h4V9z M3,13v8h8v-8H3z M9,19H5v-4h4V19z M13,3v8h8V3H13z M19,9h-4V5h4V9z M13,13v8h8v-8H13z M19,19h-4v-4h4V19z"></path><rect fill-rule="evenodd" clip-rule="evenodd" fill="none" width="24" height="24"></rect></g>\n'},15:function(container,depth0,helpers,partials,data){var stack1;return null!=(stack1=helpers.if.call(null!=depth0?depth0:container.nullContext||{},null!=depth0?depth0.nextType:depth0,"===","template",{name:"if",hash:{},fn:container.program(16,data,0),inverse:container.program(18,data,0),data:data}))?stack1:""},16:function(container,depth0,helpers,partials,data){return'                <path d="M4 14h4v-4H4v4zm0 5h4v-4H4v4zM4 9h4V5H4v4zm5 5h12v-4H9v4zm0 5h12v-4H9v4zM9 5v4h12V5H9z"></path></svg>\n'},18:function(container,depth0,helpers,partials,data){return'                <path d="M4 14h4v-4H4v4zm0 5h4v-4H4v4zM4 9h4V5H4v4zm5 5h4v-4H9v4zm0 5h4v-4H9v4zM9 9h4v-4H9v4zm0"></path>\n            '},compiler:[7,">= 4.0.0"],main:function(container,depth0,helpers,partials,data){var stack1,alias1=null!=depth0?depth0:container.nullContext||{};return(null!=(stack1=helpers.if.call(alias1,null!=depth0?depth0.title:depth0,{name:"if",hash:{},fn:container.program(1,data,0),inverse:container.noop,data:data}))?stack1:"")+'<div class="table-actions-container">\n'+(null!=(stack1=helpers.if.call(alias1,null!=depth0?depth0.buttons:depth0,{name:"if",hash:{},fn:container.program(3,data,0),inverse:container.noop,data:data}))?stack1:"")+'    <div class="flex-1"></div>\n    '+(null!=(stack1=helpers.if.call(alias1,null!=depth0?depth0.search:depth0,{name:"if",hash:{},fn:container.program(6,data,0),inverse:container.noop,data:data}))?stack1:"")+(null!=(stack1=helpers.if.call(alias1,null!=depth0?depth0.nextType:depth0,{name:"if",hash:{},fn:container.program(12,data,0),inverse:container.noop,data:data}))?stack1:"")+"</div>"},useData:!0}),this.Handlebars.templates["adhara-list-template-header"]=Handlebars.template({1:function(container,depth0,helpers,partials,data,blockParams){var stack1;return"    <b>"+container.escapeExpression(container.lambda(null!=(stack1=blockParams[0][0])?stack1.display_name:stack1,depth0))+"</b>&nbsp;|\n"},compiler:[7,">= 4.0.0"],main:function(container,depth0,helpers,partials,data,blockParams){var stack1;return null!=(stack1=helpers.each.call(null!=depth0?depth0:container.nullContext||{},depth0,{name:"each",hash:{},fn:container.program(1,data,2,blockParams),inverse:container.noop,data:data,blockParams:blockParams}))?stack1:""},useData:!0,useBlockParams:!0}),this.Handlebars.templates["adhara-list-template-item"]=Handlebars.template({1:function(container,depth0,helpers,partials,data){var helper,alias1=null!=depth0?depth0:container.nullContext||{},alias2=helpers.helperMissing,alias4=container.escapeExpression;return"        <b>"+alias4("function"==typeof(helper=null!=(helper=helpers.key||(null!=depth0?depth0.key:depth0))?helper:alias2)?helper.call(alias1,{name:"key",hash:{},data:data}):helper)+"</b>: "+alias4("function"==typeof(helper=null!=(helper=helpers.value||(null!=depth0?depth0.value:depth0))?helper:alias2)?helper.call(alias1,{name:"value",hash:{},data:data}):helper)+"<br />\n"},compiler:[7,">= 4.0.0"],main:function(container,depth0,helpers,partials,data){var stack1;return"<div>\n"+(null!=(stack1=(helpers.loopObject||depth0&&depth0.loopObject||helpers.helperMissing).call(null!=depth0?depth0:container.nullContext||{},depth0,{name:"loopObject",hash:{},fn:container.program(1,data,0),inverse:container.noop,data:data}))?stack1:"")+"</div>\n"},useData:!0}),this.Handlebars.templates["adhara-list-template"]=Handlebars.template({1:function(container,depth0,helpers,partials,data,blockParams,depths){var helper,alias1=container.lambda,alias2=container.escapeExpression,alias3=null!=depth0?depth0:container.nullContext||{},alias4=helpers.helperMissing;return'            <tr adhara-datum-row="'+alias2(alias1(blockParams[0][1],depth0))+'">\n                <td adhara-datum-col="'+alias2(alias1(blockParams[0][1],depth0))+"-"+alias2("function"==typeof(helper=null!=(helper=helpers.column||(null!=depth0?depth0.column:depth0))?helper:alias4)?helper.call(alias3,{name:"column",hash:{},data:data,blockParams:blockParams}):helper)+'">\n                    '+alias2((helpers.include||depth0&&depth0.include||alias4).call(alias3,null!=depths[1]?depths[1].itemTemplate:depths[1],blockParams[0][0],{name:"include",hash:{},data:data,blockParams:blockParams}))+"\n                </td>\n            </tr>\n"},compiler:[7,">= 4.0.0"],main:function(container,depth0,helpers,partials,data,blockParams,depths){var stack1,helper,alias1=null!=depth0?depth0:container.nullContext||{},alias2=helpers.helperMissing,alias3=container.escapeExpression;return"<div "+alias3((helpers.addAttr||depth0&&depth0.addAttr||alias2).call(alias1,null!=depth0?depth0.containerAttributes:depth0,{name:"addAttr",hash:{},data:data,blockParams:blockParams}))+'>\n    <table class="table '+alias3("function"==typeof(helper=null!=(helper=helpers.tableClass||(null!=depth0?depth0.tableClass:depth0))?helper:alias2)?helper.call(alias1,{name:"tableClass",hash:{},data:data,blockParams:blockParams}):helper)+'">\n        <thead>\n        <tr>\n            '+alias3((helpers.include||depth0&&depth0.include||alias2).call(alias1,null!=depth0?depth0.headerTemplate:depth0,null!=depth0?depth0.columns:depth0,{name:"include",hash:{},data:data,blockParams:blockParams}))+"\n        </tr>\n        </thead>\n        <tbody>\n"+(null!=(stack1=helpers.each.call(alias1,null!=depth0?depth0.data:depth0,{name:"each",hash:{},fn:container.program(1,data,2,blockParams,depths),inverse:container.noop,data:data,blockParams:blockParams}))?stack1:"")+"        </tbody>\n    </table>\n</div>"},useData:!0,useDepths:!0,useBlockParams:!0}),this.Handlebars.templates["adhara-list"]=Handlebars.template({1:function(container,depth0,helpers,partials,data){return"            "+container.escapeExpression((helpers.include||depth0&&depth0.include||helpers.helperMissing).call(null!=depth0?depth0:container.nullContext||{},null!=depth0?depth0.fetchingDataTemplate:depth0,depth0,{name:"include",hash:{},data:data}))+"\n"},3:function(container,depth0,helpers,partials,data){var stack1,alias1=null!=depth0?depth0:container.nullContext||{};return(null!=(stack1=helpers.if.call(alias1,null!=depth0?depth0.isPaginationRequired:depth0,{name:"if",hash:{},fn:container.program(4,data,0),inverse:container.noop,data:data}))?stack1:"")+'        <div class="list-contents">\n'+(null!=(stack1=helpers.if.call(alias1,null!=depth0?depth0.data:depth0,{name:"if",hash:{},fn:container.program(7,data,0),inverse:container.program(9,data,0),data:data}))?stack1:"")},4:function(container,depth0,helpers,partials,data){var stack1,alias1=null!=depth0?depth0:container.nullContext||{},alias2=helpers.helperMissing,alias3=container.escapeExpression;return'                <div class="row flex-row-reverse">\n                    <div class="col-xs-12">\n                        <div class="btn-group float-right" role="group">\n                            <button '+(null!=(stack1=helpers.if.call(alias1,null!=depth0?depth0.isFirstPage:depth0,{name:"if",hash:{},fn:container.program(5,data,0),inverse:container.noop,data:data}))?stack1:"")+' class="btn btn-sm btn-link d-inline-block" data-onclick="previousPage">'+alias3((helpers.i18n||depth0&&depth0.i18n||alias2).call(alias1,"list_view.navigation.previous",{name:"i18n",hash:{},data:data}))+"</button>\n                            <button "+(null!=(stack1=helpers.if.call(alias1,null!=depth0?depth0.isLastPage:depth0,{name:"if",hash:{},fn:container.program(5,data,0),inverse:container.noop,data:data}))?stack1:"")+' class="btn btn-sm btn-link d-inline-block ml-2" data-onclick="nextPage">'+alias3((helpers.i18n||depth0&&depth0.i18n||alias2).call(alias1,"list_view.navigation.next",{name:"i18n",hash:{},data:data}))+"</button>\n                        </div>\n                    </div>\n                </div>\n"},5:function(container,depth0,helpers,partials,data){return"disabled"},7:function(container,depth0,helpers,partials,data){return"                "+container.escapeExpression((helpers.include||depth0&&depth0.include||helpers.helperMissing).call(null!=depth0?depth0:container.nullContext||{},null!=depth0?depth0.listTemplate:depth0,depth0,{name:"include",hash:{},data:data}))+"\n"},9:function(container,depth0,helpers,partials,data){return"                "+container.escapeExpression((helpers.include||depth0&&depth0.include||helpers.helperMissing).call(null!=depth0?depth0:container.nullContext||{},null!=depth0?depth0.noDataTemplate:depth0,depth0,{name:"include",hash:{},data:data}))+"\n"},compiler:[7,">= 4.0.0"],main:function(container,depth0,helpers,partials,data){var stack1,helper,alias1=null!=depth0?depth0:container.nullContext||{},alias2=helpers.helperMissing,alias4=container.escapeExpression;return'<div id="adharaTable_'+alias4("function"==typeof(helper=null!=(helper=helpers.title||(null!=depth0?depth0.title:depth0))?helper:alias2)?helper.call(alias1,{name:"title",hash:{},data:data}):helper)+'" class="adhara-table-container" '+alias4((helpers.addAttr||depth0&&depth0.addAttr||alias2).call(alias1,null!=depth0?depth0.containerAttributes:depth0,'{"class":"adhara-table-container"}',{name:"addAttr",hash:{},data:data}))+">\n    "+alias4((helpers.include||depth0&&depth0.include||alias2).call(alias1,null!=depth0?depth0.menuTemplate:depth0,depth0,{name:"include",hash:{},data:data}))+'\n    <div class="adhara-list-wrapper adhara-'+alias4("function"==typeof(helper=null!=(helper=helpers.listType||(null!=depth0?depth0.listType:depth0))?helper:alias2)?helper.call(alias1,{name:"listType",hash:{},data:data}):helper)+'-list">\n'+(null!=(stack1=helpers.if.call(alias1,null!=(stack1=null!=depth0?depth0.state:depth0)?stack1.fetching_data:stack1,{name:"if",hash:{},fn:container.program(1,data,0),inverse:container.program(3,data,0),data:data}))?stack1:"")+"        </div>\n    </div>\n</div>"},useData:!0}),this.Handlebars.templates["adhara-tab-view"]=Handlebars.template({1:function(container,depth0,helpers,partials,data){var helper,alias1=null!=depth0?depth0:container.nullContext||{},alias2=helpers.helperMissing,alias4=container.escapeExpression;return'                <li class="'+alias4("function"==typeof(helper=null!=(helper=helpers.className||(null!=depth0?depth0.className:depth0))?helper:alias2)?helper.call(alias1,{name:"className",hash:{},data:data}):helper)+'">\n                    <a href="'+alias4("function"==typeof(helper=null!=(helper=helpers.link||(null!=depth0?depth0.link:depth0))?helper:alias2)?helper.call(alias1,{name:"link",hash:{},data:data}):helper)+'">\n                        \x3c!--<div class="icon-circle">\n                            <i class="tab-icon ti-x '+alias4("function"==typeof(helper=null!=(helper=helpers.icon||(null!=depth0?depth0.icon:depth0))?helper:alias2)?helper.call(alias1,{name:"icon",hash:{},data:data}):helper)+'"></i>\n                        </div>--\x3e\n                        '+alias4("function"==typeof(helper=null!=(helper=helpers.name||(null!=depth0?depth0.name:depth0))?helper:alias2)?helper.call(alias1,{name:"name",hash:{},data:data}):helper)+"\n                    </a>\n                </li>\n"},compiler:[7,">= 4.0.0"],main:function(container,depth0,helpers,partials,data){var stack1,helper,alias1=null!=depth0?depth0:container.nullContext||{},alias2=helpers.helperMissing,alias4=container.escapeExpression;return'<div class="'+alias4("function"==typeof(helper=null!=(helper=helpers.containerClass||(null!=depth0?depth0.containerClass:depth0))?helper:alias2)?helper.call(alias1,{name:"containerClass",hash:{},data:data}):helper)+'">\n    <div class="'+alias4("function"==typeof(helper=null!=(helper=helpers.tabNavClass||(null!=depth0?depth0.tabNavClass:depth0))?helper:alias2)?helper.call(alias1,{name:"tabNavClass",hash:{},data:data}):helper)+'">\n        <ul class="'+alias4("function"==typeof(helper=null!=(helper=helpers.tabListClass||(null!=depth0?depth0.tabListClass:depth0))?helper:alias2)?helper.call(alias1,{name:"tabListClass",hash:{},data:data}):helper)+'">\n'+(null!=(stack1=helpers.each.call(alias1,null!=depth0?depth0.tabsList:depth0,{name:"each",hash:{},fn:container.program(1,data,0),inverse:container.noop,data:data}))?stack1:"")+'        </ul>\n        <div class="tab-content">\n            <div class="tab-pane active in">\n            </div>\n        </div>\n    </div>\n</div>'},useData:!0});